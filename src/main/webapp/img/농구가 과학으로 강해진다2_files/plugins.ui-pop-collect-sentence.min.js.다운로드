/*! @kyobobook/kbb-js v1.0.10 (build 20231201-105226) */
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-pop-collect-sentence"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_name_=self.webpackChunk_KbbJS_name_||[]).push([[741],{89544:function(t,e,n){n.r(e),n.d(e,{default:function(){return X}});var a=n(13535),i=n.n(a),o=n(68420),l=n(27344),r=n(90306),s=n(3020),c=n(3362),p=n(12088),u=n.n(p),d=n(69798),_=n.n(d),h=n(98882),f=n.n(h),g=n(13792),m=n(82324),v=n(44845),y=n(5281),b=n(51614),k=n.n(b),E=n(51956),x=n(68345);function w(){var t=this;if(this.urlinfo.debugPop("pop-collect")){var e=this.urlinfo.debug("collect")||"",n=this.urlinfo.debug("page")||"";[function(){t.collect=e,t.page=n,t.active=!0}].forEach((function(t){return setTimeout(t,1e3)}))}}var C=n(96526),S="add",O="modify",D="integrated",P="present",M="myroom",R="product",I="event",A="welcome";function B(){var t=this.ua.isMobile,e=this.getOption("trigger");if(null!==e){if(this._id=$(e).attr("data-target"),$(this._id).length)return this._dialog=$(this._id).dialog("instance"),$(this._id);var n=(0,C.ut)({id:$(e).attr("data-target").replace(/^#/,""),class:"dialog_wrap has_btn ".concat(this.type===D?t?"":"no_title_line":t?"no_title_line":""),"data-class":t?"dialog_full":"dialog_sm"}),a=$('<button type="button" class="btn_dialog_close"><span class="ico_dialog_close"></span><span class="hidden">닫기</span></button>'),i=(0,C.ut)("dialog_header").append((0,C.ut)({class:"dialog_title",text:"문장수집 ".concat(this.event===S?"작성":"수정")})),o=L.call(this),l=$('<button type="button" class="btn_md btn_primary disabled"><span class="text">'.concat(this.event===S?"등록":"수정","</span></button>")),r=(0,C.ut)("dialog_footer").append(l);return n.append([a,i,o,r]),$("body").append(n),this.setElement("dialog",n),n}}function L(){var t=this,e=this.ua.isMobile,n=(0,C.ut)("dialog_contents"),a=(0,C.ut)("custom_scroll_wrap"),i=null,o=e?N.call(this):T.call(this),l=Z.call(this),r=this.getOption("searchId")||"popProdSearchPop",s=(0,C.ut)("btn_wrap page_top ".concat(e?"":"full")).append((0,C.ut)({class:"btn_".concat(e?"sm":"ip"," btn_line_gray"),type:"button","data-target":"#".concat(r),"data-role":"btn-dialog"},"button").append(['<span class="ico_search"></span>','<span class="text">상품 검색</span>']).on("click",(function(e){t.productDialog.active=!0})));this.setElement("product.search",s);var c=[];return c=null!==this.product?[o,l,z.call(this)]:[l,z.call(this)],this.type===D?(c.unshift(s),i=a.append((0,C.ut)("integrate_wrap").append(c))):i=a.append(c),n.append(i)}function z(){var t=this.ua.isMobile?"162":"70",e=null!==this.product?"책 속 마음을 두드리는 한 문장을 기록해보세요. 5자 이상 입력해주세요.":"상품을 먼저 선택하세요.",n=(0,C.ut)("form_wrap ".concat(this.isMobile?"type_md":"type_lg")),a=(0,C.ut)({id:"textKillingPart",class:"form_textarea",title:"타이틀 입력",placeholder:e,style:"height: ".concat(t,"px;")},"textarea");this.setElement("textArea",a);var i=[(0,C.ut)("form_box").append([(0,C.ut)("form_title").append((0,C.ut)({for:"textKillingPart",class:"form_label",html:'문장수집 작성 <span class="required"><span class="hidden">필수입력</span></span>'},"label")),(0,C.ut)("form_cont").append((0,C.ut)("byte_check_wrap").append([a,(0,C.ut)("byte_check_footer").append((0,C.ut)("byte_check").append([(0,C.ut)({class:"count",text:0},"span"),(0,C.ut)({class:"total",text:300},"span")]))]))]),(0,C.ut)("form_box").append([(0,C.ut)("form_title").append((0,C.ut)("form_title").append((0,C.ut)({for:"inputPageNumber",class:"form_label",text:"발췌 페이지"},"label"))),(0,C.ut)("form_cont").append((0,C.ut)("form_prefix_box").append([(0,C.ut)({class:"prefix_unit",text:"P."}),(0,C.ut)({type:"number",id:"inputPageNumber",class:"form_ip",placeholder:"숫자만 입력"},"input")]))])];return n.append(i)}function T(){var t=this.ui.createPdtImgWrap({pid:this.pid,bid:this.getOption("bid"),type:this.getOption("dvsnCode")}).attr("href",(0,C.kR)({pid:this.pid,type:this.getOption("dvsnCode")})),e=(0,C.ut)({class:"prod_name",text:this.title},"span");return this.setElement("thumbnail",t),this.setElement("product.name",e),(0,C.ut)("thumbnail_round_box").append((0,C.ut)("prod_area horizontal").append([(0,C.ut)("prod_thumb_box size_min").append(t),(0,C.ut)("prod_info_box size_xs").append((0,C.ut)({href:(0,C.kR)({pid:this.pid,type:this.getOption("dvsnCode")}),class:"prod_info"},"a").append(e))]))}function N(){var t=(0,C.LM)({pid:this.pid,bid:this.getOption("bid"),type:this.getOption("dvsnCode")}),e=(0,C.ut)({class:"img_box"},"span").append(t),n=(0,C.ut)({class:"prod_name",text:this.title});return this.setElement("thumbnail",e),this.setElement("product.name",n),(0,C.ut)("prod_round_box").append((0,C.ut)("prod_area horizontal").append([(0,C.ut)("prod_thumb_box size_min").append((0,C.ut)({href:(0,C.kR)({pid:this.pid,type:this.getOption("dvsnCode")}),class:"prod_link"},"a").append(e)),(0,C.ut)("prod_info_box size_sm").append((0,C.ut)({href:(0,C.kR)({pid:this.pid,type:this.getOption("dvsnCode")}),class:"prod_info"},"a").append(n))]))}function U(t){var e=t.title,n=t.cmdtName,a=t.cmdtCode,i=t.id,o=t.saleCmdtid,l=t.dvsnCode,r=t.imgPath,s=(0,C.ut)(this.isMobile?"prod_round_box":"thumbnail_round_box"),c=(0,C.ut)("prod_area horizontal"),p=(0,C.ut)("prod_thumb_box ".concat(this.isMobile?"size_xs":"size_min")).append(null!=r?(0,C.ut)("prod_link","a").append((0,C.ut)("img_box","span").append((0,C.ut)({src:r},"img"))).attr("href",(0,C.kR)({pid:i||o,type:l})):this.ui.createPdtImgWrap({pid:i||o,bid:a,type:l})).attr("href",(0,C.kR)({pid:i||o,type:l})),u=(0,C.ut)("prod_info_box size_xs").append((0,C.ut)({href:(0,C.kR)({pid:i||o,type:l}),class:"prod_info",html:'<span class="prod_name">'.concat(e||n,"</span>")},"a"));return c.append([p,u]),s.append(c),this.setElement("box",c),this.setElement("thumb",p),this.setElement("prucut.info",u),s}function Z(){var t="";switch(this.getOption("dvsncode")){case x.Pp.KYOBO_BOOK_KOR:case x.Pp.KYOBO_BOOK_ENG:case x.Pp.KYOBO_PB:case x.Pp.COMBI_PRODUCT:t=(0,C.ut)({class:"bul_item_dot ".concat(this.isMobile?"font_size_xs":"font_size_xxs"),text:"구매 후 작성 시, 90일 이내"},"p").append((0,C.ut)({class:"fc_black",text:" e 교환권 100원 적립"},"span"));break;case x.Pp.EBOOK:case x.Pp.EBOOK_AUDIO:case x.Pp.EBOOK_VIDEO:case x.Pp.EBOOK_DUM:case x.Pp.EBOOK_SAM:t=(0,C.ut)({class:"bul_item_dot ".concat(this.isMobile?"font_size_xs":"font_size_xxs"),text:"구매 후 90일 이내 작성 시,"},"p").append((0,C.ut)({class:"fc_black",text:" e교환권 100원 적립"},"span")).append((0,C.ut)({class:"".concat(this.isMobile?"font_size_xs":"font_size_xxs"),text:"(제외조건 유의사항 참조)"},"p"));break;default:return}var e=(0,C.ut)("info_text_box").append(t);return this.setElement("info",e),e}function K(){var t=this,e=B.call(this).one("dialogcreate",(function(e,n){t._dialog=$(e.target).dialog("instance"),t.emit("init"),t.initialized=!0})).on("dialogclose",(function(e){return t.reset()}));this.ui.dialog("#"+e.attr("id"))}var V=n(40196),H=n(99693),G=n(54569),j=n(44721),q=n.n(j);function W(){return document.querySelector("html").dataset.service}var J=n(73966);function Y(t){var e=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;n=i()(a,arguments,o)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var Q=function(t){(0,r.Z)(n,t);var e=Y(n);function n(t,a,i){var l,r;if((0,o.Z)(this,n),(r=e.call(this,t,a,i))._active=!1,r._collect="",r._page="",r._event=r.getOption("event")||S,r._type=r.getOption("type"),r._product=r.type===D?null:{},r._pid=(null===(l=(0,E.getGlobalPluginOptions)("uiProduct"))||void 0===l?void 0:l.pid)||r.getOption("pid"),r._title=r.getOption("title"),r._path=null,r._revwNum="",r._appRevw=new H.W,r.type===D){var c,p;if($("#".concat(null==i||null===(c=i.elements)||void 0===c?void 0:c.searchId)).length>0)return(0,s.Z)(r);var u=(null==i||null===(p=i.elements)||void 0===p?void 0:p.searchId)||"popProdSearchPop";r._productDialog=new V.w((0,y.Z)(r),{id:u,type:"sentence"})}return r.once("init",(function(){r.init()})),r.on("product-insert",(function(t){var e=t.data;r.updateDom(e)})),K.call((0,y.Z)(r)),w.call((0,y.Z)(r)),r}return(0,l.Z)(n,[{key:"product",get:function(){return this._product},set:function(t){this._product=t,this.emit("product-insert",{data:t})}},{key:"path",get:function(){return window.location.pathname}},{key:"productDialog",get:function(){return this._productDialog}},{key:"active",get:function(){return this.dialog.isOpen()||!1},set:function(t){t!==this.active&&null!=this.dialog&&this.dialog[t?"open":"close"]()}},{key:"getParentList",get:function(){return this._getParentList},set:function(t){this.pid=t.id,this.product=t}},{key:"collect",get:function(){return this._collect},set:function(t){var e=t.length,n=this.getElement("submit"),a=this.getElement("textArea"),i=this.getElement("count");e>5&&null!=this.pid?n.removeClass("disabled"):n.addClass("disabled"),e>300?a.val(this.collect):(i.text(e),a.val(t),this._collect=t)}},{key:"page",get:function(){return this._page},set:function(t){this.getElement("input").val(t),this._page=t}},{key:"event",get:function(){return this._event},set:function(t){this._event=t}},{key:"revwNum",get:function(){return this._revwNum},set:function(t){this._revwNum=t}},{key:"pid",get:function(){return this._pid},set:function(t){var e=this.collect.length,n=this.getElement("submit");e>5&&null!=t?n.removeClass("disabled"):n.addClass("disabled"),this._pid=t}},{key:"dialog",get:function(){return this._dialog}},{key:"$root",get:function(){return $(this.id)}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"title",get:function(){return this._title}},{key:"appRevw",get:function(){return this._appRevw}},{key:"uiCollectSentence",get:function(){return this.uber.modules.get("uiCollectSentence")}},{key:"init",value:function(){var t=this,e=this.$root,n=this.options.elements,a=f()(e).call(e,null==n?void 0:n.submit);this.setElement("submit",a.on("click",(function(e){t.event!==S?t.submit():t.ui.alert({code:"AL_15_0020"}).then((function(e){var n=e.value;if(!n)return n;t.submit()}))})));var i=f()(e).call(e,null==n?void 0:n.textArea);i.on("input paste",(function(e){t.collect=e.target.value})),this.setElement("textArea",i);var o=f()(e).call(e,null==n?void 0:n.count);this.setElement("count",o);var l=f()(e).call(e,null==n?void 0:n.input);l.on("propertychange change keyup paste input",(function(e){t.page=e.target.value})),this.setElement("input",l),f()(e).call(e,null==n?void 0:n.close).on("click",(function(e){""===t.collect?t.active=!1:t.ui.alert({title:"작성한 내용은 저장되지 않습니다.<br/>취소하겠습니까?",showCancelButton:!0}).then((function(e){e.value&&(t.active=!1)}))}))}},{key:"submit",value:function(){var t,e=this,n=J.T5.KYOBOBOOK;this.pid&&(n=k()(t=this.pid).call(t,"E")?J.T5.EBOOK:n,n=function(t){var e;return q()(e=[x.Pp.HOTTRACKS_DVD,x.Pp.HOTTRACKS_GIFT,x.Pp.HOTTRACKS_MUSIC_ALBUM]).call(e,t)}(this.product.dvsncode)?J.T5.HOTTRACKS:n);var a=this.buildParams(n),i="/api".concat((0,E.getGlobalOption)("api.urls.common.sentence.".concat(this.event)));this.ui.loading=!0,this.sendRequest(i,a).then(this.handleResponse.bind(this)).catch((function(t){G.u.call(e,t)})).finally((function(){e.ui.loading=!1}))}},{key:"showPopupAndAlert",value:function(t){var e=this;this.ui.alert(t).then((function(){e.appReviewPopUp()}))}},{key:"buildParams",value:function(t){var e={kbcSiteCode:t,revwKindCode:"002",saleCmdtid:this.pid,revwCntt:this.collect,exttPageNum:""===this.page?0:parseInt(this.page)};return this.event===O&&(e.revwNum=this.revwNum),e}},{key:"sendRequest",value:function(t,e){return this.$http(t,{method:this.event===S?"POST":"PUT",body:e})}},{key:"handleResponse",value:function(t){var e=t.statusCode,n=t.message;200===e&&this.uiCollectSentence?this.handleSentenceSuccess.call(this):G.u.call(this,n),this.active=!1}},{key:"handleSentenceSuccess",value:function(){var t,e=this,n="문장수집이 등록되었습니다.",a=W.call(this),i={page:1};this.type!==D&&u()(i,{saleCmdtid:this.pid}),this.uiCollectSentence.emit("get-data",{params:i});var o=(t={},(0,v.Z)(t,M,(function(){return e.showPopupAndAlert(n)})),(0,v.Z)(t,R,(function(){return e.ui.alert(n)})),(0,v.Z)(t,I,(function(){return e.ui.alert(n)})),(0,v.Z)(t,A,(function(){return e.ui.alert(n)})),t)[a];o&&o()}},{key:"appReviewPopUp",value:function(){var t=this;this.ui.loading=!0,this.$http("/api/gw/pdt/sentences/sentMonthCnt",{method:"GET"}).then((function(e){var n=e.data;if(t.authorized&&t.ua.isMobileApp&&n>=3){t.appRevw.satisfactionConfirm({cookieName:"my.sentences.appReviewAlert",iosUrl:"https://apps.apple.com/kr/app/id464243977",androidUrl:"https://play.google.com/store/apps/details?id=mok.android",expiresNum:50,eventName:"문장수집"})}else setTimeout(window.location.reload(),1e3)})).catch((function(e){var n=null==e?void 0:e.resultMessage;t.ui.alert(n||x.AQ.HTTP_ERROR),setTimeout(window.location.reload(),1e3)})).finally((function(){t.ui.loading=!1}))}},{key:"reset",value:function(){var t,e=this.getElement("count");(e.length>0&&e.text("0"),this.page="",this.collect="",this.type===D)&&((this.getElement("box")||[]).length>0&&(this.getElement("box").parent().remove(),f()(t=this.getElement("product.search")).call(t,".text").text("상품 검색"),this.getElement("textArea").attr("placeholder","상품을 먼저 선택하세요.")))}},{key:"updateDom",value:function(t){var e,n,a,i,o,l,r=t.title,s=t.cmdtName,c=t.imgPath,p=t.saleCmdtid,u=t.dvsnCode,d=f()(e=this.getElement("dialog")).call(e,".integrate_wrap .btn_wrap"),_=this.getElement("box")||[];return this.type===D?(f()(i=this.getElement("product.search")).call(i,".text").text("상품 재검색"),this.getElement("textArea").attr("placeholder","책 속 마음을 두드리는 한 문장을 기록해보세요. 5자 이상 입력해주세요."),_.length?(_.parent().remove(),void d.after(U.call(this,t))):void d.after(U.call(this,t))):this.type===P||null==c?(d=f()(o=this.getElement("dialog")).call(o,".info_text_box"),(_=f()(l=this.getElement("dialog")).call(l,this.isMobile?".prod_round_box":".thumbnail_round_box")).remove(),void d.before(U.call(this,t))):(this.getElement("thumbnail").closest("a").attr("href",(0,E.parseProdDetailURL)({pid:p,type:u})),f()(n=this.getElement("thumbnail").closest("a")).call(n,".img_box").removeClass("no_img"),f()(a=this.getElement("thumbnail")).call(a,"img").attr("src",c),this.getElement("product.name").text(r||s),void this.getElement("product.name").closest("a.prod_info").attr("href",(0,E.parseProdDetailURL)({pid:p,type:u})))}},{key:"loadScript",value:function(){var t,e=this;f()(t=this.$root).call(t,'[data-kbbfn="ui-product-search"]').each((function(t,n){e.ui.loadKbbFn(n)}))}}]),n}(m.ht);function F(t){var e=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;n=i()(a,arguments,o)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var X=new(function(t){(0,r.Z)(n,t);var e=F(n);function n(){var t;return(0,o.Z)(this,n),(t=e.call(this,"pop-collect-sentence"))._list=[],t.initOptions(),t}return(0,l.Z)(n,[{key:"initOptions",value:function(){u()(this.options,{elements:{root:"#popKillingPartEdit",submit:".dialog_footer .btn_primary",textArea:"#textKillingPart",input:"#inputPageNumber",count:".byte_check_wrap .byte_check .count",close:".btn_dialog_close"}})}},{key:"list",get:function(){return this._list}},{key:"createDialog",value:function(t){var e=this,n=(0,g.U2)(t,"trigger");if(null==n)return _().reject(new Error("[".concat(n,"] undefined trigger element selector!")));if((0,g.U2)(t,"type")===P&&$(n).on("click.update",(function(n){e.list[0].pid=(0,g.U2)(t,"pid"),e.list[0].product={cmdtName:(0,g.U2)(t,"title"),saleCmdtid:(0,g.U2)(t,"pid"),dvsnCode:(0,g.U2)(t,"dvsncode"),cmdtCode:(0,g.U2)(t,"bid")}})),!(0,E.isString)(n)){var a="trigger_"+this.list.length;$(n).data("kbbfn-sid",a),n=$(n).attr("data-target")}var i=this.getInstance(n);if(null!=i)return _().resolve(i);var o=new Q(this,n,t);return this.list.push(o),_().resolve(o)}},{key:"exists",value:function(t){return null!=this.getInstance(t)}},{key:"getInstance",value:function(t){var e;return f()(e=this.list).call(e,(function(e){return e.id===t}))}}]),n}(m.YZ))},40196:function(t,e,n){n.d(e,{w:function(){return rt}});var a=n(13535),i=n.n(a),o=n(68420),l=n(27344),r=n(90306),s=n(3020),c=n(3362),p=n(98882),u=n.n(p),d=n(49573),_=n.n(d),h=n(88066),f=n.n(h),g=n(82324),m=n(13792),v=n(57508),y=n(5281),b=n(32647),k=n(12088),E=n.n(k),x=n(56801),w=n(89356),C=n.n(w),S=n(63263),O=n.n(S),D=n(58377),P=n.n(D),M=n(13038),R=n.n(M),I=n(44845),A=n(30699),B=n.n(A),L=n(50047),z=n.n(L),T=n(44721),N=n.n(T),U=n(51956);function Z(t,e,n){var a=$(t.target).closest("tr").data("search-id"),i=u()(n).call(n,"img").attr("src"),o=u()(n).call(n,"img").data("kbbfn-adult"),l={title:e.CMDT_NAME,thumb:i,author:e.CHRC_ALL,pubName:e.PBCM_NAME,regDate:e.RLSE_DATE,klover:e.KLOVER_REVW_RVGR,cmdtCode:e.CMDTCODE,dvsnCode:e.SALE_CMDT_DVSN_CODE,id:a,$imgWrap:n,adultIf:o};this.uber.getParentList=l,this.active=!1}function K(t,e,n){var a=$(t.target).closest("li").data("search-id"),i=u()(n).call(n,"img").attr("src"),o=u()(n).call(n,"img").data("kbbfn-adult"),l={title:e.CMDT_NAME,thumb:i,author:e.CHRC_ALL,pubName:e.PBCM_NAME,regDate:e.RLSE_DATE,klover:e.KLOVER_REVW_RVGR,cmdtCode:e.CMDTCODE,dvsnCode:e.SALE_CMDT_DVSN_CODE,id:a,$imgWrap:n,adultIf:o};this.uber.getParentList=l,this.active=!1}function V(t){var e,n=[],a=[];return N()(t).call(t,"|")?(n=t.split("|"),N()(e=n[0]).call(e,"@@")?(a=n[0].split("@@"),"".concat(a[1]," 외")):(a=n[0].split("@"),"".concat(a[2]," 외"))):N()(t).call(t,"@@")?(a=t.split("@@"),"".concat(a[1])):(a=t.split("@"),"".concat(a[2]||""))}var H=[{value:"KOR",text:"국내도서",selected:!0},{value:"FGN",text:"외국도서",exclude:[]},{value:"EBK",text:"eBook"},{value:"MUSIC",text:"음반",exclude:["sentence","review"]},{value:"DVD",text:"DVD",exclude:["sentence","review"]}];function G(t,e){var n=C()(t);if(O()){var a=O()(t);e&&(a=B()(a).call(a,(function(e){return P()(t,e).enumerable}))),n.push.apply(n,a)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){(0,I.Z)(t,e,n[e])})):R()?Object.defineProperties(t,R()(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,P()(n,e))}))}return t}function q(t){var e=this;if(t){var n=(0,U.createEl)({id:this.id,class:"dialog_wrap spec_compare_search no_title_line","data-class":"dialog_full"}),a=(0,U.createEl)({type:"button",class:"btn_dialog_close","data-dialog-close":!0,html:'<span class="ico_dialog_close"></span><span class="hidden">닫기</span>'},"button"),i=(0,U.createEl)({class:"dialog_header",html:'<div class="dialog_title">상품 검색</div>'});return n.append([a,i])}var o=(0,U.createEl)({id:this.id,class:"dialog_wrap spec_compare_search"}),l=(0,U.createEl)({type:"button",class:"btn_dialog_close","data-dialog-close":!0,html:'<span class="ico_dialog_close"></span><span class="hidden">닫기</span>'},"button").on("click",(function(t){e.active=!1})),r=(0,U.createEl)({class:"dialog_header",html:'<div class="dialog_title">상품 검색</div>'});return o.append([l,r])}function W(t){var e,n=B()(e=z()(H).call(H,(function(e){var n=(0,U.get)(e,"exclude",[]);if(!N()(n).call(n,t)){var a=e.value,i=e.text,o=(0,U.createEl)({value:a,text:i},"OPTION");return(0,U.get)(e,"selected")&&o.attr("selected","selected"),o}}))).call(e,Boolean),a=(0,U.createEl)({id:"selectBook",title:"카테고리 선택"},"SELECT").append(n);return(0,U.createEl)("form_sel").append(a)}function J(t,e){return t?(0,U.createEl)("dialog_contents no_margin").append([(0,U.createEl)("contents_inner").append([(0,U.createEl)("form_search_box has_sel").append([W(e),(0,U.createEl)({class:"form_ip_search",html:'<input type="search" class="form_ip" placeholder="검색어를 입력하세요" title="타이틀" /><button type="button" class="btn_ip_clear"><span class="hidden">초기화</span></button>'}),(0,U.createEl)({type:"button",class:"btn_ip_search",html:'<span class="hidden">검색</span>'},"button")])]),(0,U.createEl)("switch_prod_wrap view_type_list").append([(0,U.createEl)("prod_list","ul")])]):(0,U.createEl)("dialog_contents").append([(0,U.createEl)("custom_scroll_wrap").append([(0,U.createEl)("form_search_box has_sel").append([W(e),(0,U.createEl)({class:"form_ip_search",html:'<input type="search" class="form_ip" placeholder="상품을 검색해 보세요." title="타이틀" /><button type="button" class="btn_ip_clear"><span class="hidden">초기화</span></button>'}),(0,U.createEl)({type:"button",class:"btn_ip_search",html:'<span class="hidden">검색</span>'},"button")]),(0,U.createEl)("tbl_prod_wrap type_myroom").append([(0,U.createEl)("tbl_prod","table").append([(0,U.createEl)({text:"주문상품"},"caption"),(0,U.createEl)({},"colgroup").append([(0,U.createEl)({},"col"),(0,U.createEl)({style:"width: 75px"},"col")]),(0,U.createEl)({class:"hidden"},"thead").append([(0,U.createEl)({},"tr").append([(0,U.createEl)({scope:"col",text:"상품정보"},"th"),(0,U.createEl)({scope:"col"},"th")])]),(0,U.createEl)({class:"contentList"},"tbody")])]),(0,U.createEl)("pagination")])])}function Y(t){return{pid:t.DQ_ID,bid:t.CMDTCODE,imgPath:t.IMAGE_URL,type:t.SALE_CMDT_DVSN_CODE,adult:t.PRHB_AGE}}function Q(t){var e,n=Y(t);return"MUC"===t.SALE_CMDT_DVSN_CODE?e=(0,U.createProdImgAnchor)(j(j({},n),{},{type:"MUC"})):"DVD"===t.SALE_CMDT_DVSN_CODE?e=(0,U.createProdImgAnchor)(j(j({},n),{},{type:"DVD"})):(delete n.imgPath,e=this.modules.get("ui").createPdtImgWrap(n).attr("href",(0,U.parseStageURL)("/PDT/detail/".concat(t.DQ_ID)))),e}function F(t,e,n){var a,i,o=this,l=(0,U.parseProdDetailURL)(Y(t));return(0,U.createEl)({"data-search-id":"".concat(t.DQ_ID)},"tr").append([(0,U.createEl)({class:"prod ".concat("ebook"===n?"type_bookcover size_sm":"")},"td").append([(0,U.createEl)("prod_area horizontal").append([(0,U.createEl)({class:"prod_thumb_box size_xs"}).append(Q.call(this,t)),(0,U.createEl)({class:"prod_info_box size_xs",html:'<a href="'.concat(l,'" target="_blank" class="prod_info">')+'<span class="prod_name">'.concat(t.CMDT_NAME||"","</span>")+f()(a=f()(i='<span class="prod_name">'.concat(V(null==t?void 0:t.CHRC_ALL),"·")).call(i,t.PBCM_NAME,"·")).call(a,(0,U.getYMDformatByComma)(t.RLSE_DATE),"</span>")+"</a>"})])]),(0,U.createEl)({},"td").append([(0,U.createEl)({class:"btn_wrap full",html:'<button type="button" class="btn_xs btn_line_primary btn_select"><span class="ico_check"></span><span class="text">선택</span></button>'}).on("click",(function(e){return Z.call(o,e,t,Q.call(o,t))}))])])}function X(t,e,n){var a,i,o=this,l=(0,U.parseProdDetailURL)(Y(t));return(0,U.createEl)({class:"prod_item","data-search-id":"".concat(t.DQ_ID)},"li").append([(0,U.createEl)({class:"prod_area horizontal"}).append([(0,U.createEl)("prod_area horizontal").append([(0,U.createEl)({class:"prod_thumb_box"}).append(Q.call(this,t)),(0,U.createEl)({class:"prod_info_box",html:'<a href="'.concat(l,'" target="_blank" class="prod_info">')+'<span class="prod_name">'.concat(t.CMDT_NAME,"</span>")+"</a>"+f()(a=f()(i='<span class="prod_author">'.concat(V(null==t?void 0:t.CHRC_ALL),"·")).call(i,t.PBCM_NAME,"·")).call(a,(0,U.getYMDformatByComma)(t.RLSE_DATE),"</span>")}).append([(0,U.createEl)("spec_control_wrap").append([(0,U.createEl)({type:"button",class:"btn_xxs btn_line_primary btn_select",html:'<span class="ico_check"></span><span class="text">선택</span>'},"button").on("click",(function(e){return K.call(o,e,t,Q.call(o,t))}))])])])])])}function tt(t,e){var n,a=$(f()(n='<p class="result_count">\''.concat(e,'\' 검색결과 <b class="fc_green">')).call(n,t,"</b>건</p>"));return this.setElement("result.title",a),(0,U.createEl)({class:"list_result_wrap",html:a}).append([(0,U.createEl)("right_area").append([(0,U.createEl)({class:"form_sel","data-class":"type_sm",style:"width: 140px;"}).append([(0,U.createEl)({title:"정렬 선택",id:"selectSort",html:'<option value="qntt" selected="selected">판매량순</option><option value="date">최신순</option><option value="name">상품명순</option>'},"SELECT")])])])}function et(t,e){var n,a=$(f()(n='<p class="result_count">\''.concat(e,'\' 검색결과 <b class="fc_green">')).call(n,t,"</b>건</p>"));return this.setElement("result.title",a),[(0,U.createEl)({class:"list_result_wrap",html:a}).append([(0,U.createEl)("right_area").append([(0,U.createEl)({class:"form_sel","data-class":"type_sm",style:"width: 140px;",html:'<select id="selectSort" title="정렬 선택"><option value="qntt">판매량순</option><option value="date">최신순</option><option value="name">상품명순</option></select>'})])]),(0,U.createEl)("no_data has_desc_lg").append([(0,U.createEl)({class:"no_data_desc_lg",html:'<span class="fw_bold">'.concat(e,"</span>에 대한 검색 결과가 없습니다.")}),(0,U.createEl)({class:"no_data_desc",text:"검색어의 철자가 정확한지 다시 한 번 확인해주세요."})])]}function nt(t,e){var n,a=$(f()(n='<p class="result_count">\''.concat(e,'\' 검색결과 <b class="fc_green">')).call(n,t,"</b>건</p>")),i=(0,U.createEl)({title:"정렬 선택",id:"selectSort",html:'<option value="qntt" selected="selected">판매량순</option><option value="date">최신순</option><option value="name">상품명순</option>'},"select");return this.setElement("result.title",a),this.setElement("result.select",i),(0,U.createEl)({class:"list_result_wrap",html:a}).append([(0,U.createEl)("right_area").append([(0,U.createEl)({class:"form_sel type_no_line"}).append([i])])])}function at(t,e){return(0,U.createEl)("no_data size_lg has_desc_lg").append([(0,U.createEl)({class:"no_data_desc_lg",html:'<span class="fw_bold">'.concat(e,"</span>에 대한 검색 결과가 없습니다.")}),(0,U.createEl)({class:"no_data_desc",text:"검색어의 철자가 정확한지 다시 한 번 확인해주세요."})])}function it(t){var e=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;n=i()(a,arguments,o)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var ot=function(t){(0,r.Z)(n,t);var e=it(n);function n(t,a,i){var l;return(0,o.Z)(this,n),(l=e.call(this))._id=a,l._uber=t,((0,m.HD)(i)||(0,m.hj)(i))&&(i={text:""+i}),l._options=E()({autoOpen:!1,el:q.call((0,y.Z)(l),i.isMobile)},i||{}),l.setOption("innerHtml",J.apply((0,y.Z)(l),[i.isMobile,i.type])),l}return(0,l.Z)(n,[{key:"id",get:function(){return this._id}},{key:"uber",get:function(){return this._uber}},{key:"create",value:function(){return(0,b.Z)((0,c.Z)(n.prototype),"create",this).call(this)}}]),n}(x.DialogComponent);function lt(t){var e=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;n=i()(a,arguments,o)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var rt=function(t){(0,r.Z)(n,t);var e=lt(n);function n(t,a){var i;return(0,o.Z)(this,n),(i=e.call(this,t,a))._options=a,i._id=(null==a?void 0:a.id)||"popProdSearch",i._dialog=new ot(t,i._id,{isMobile:t.ua.isMobile,type:i.options.type}),i._type="",i._ra="qntt",i._pageSize=i.isMobile?10:20,i._pagingInfo="",i._page=1,i.on("list-change",(function(){i.isMobile?i.getMokListData():i.getInkListData()})),i.init(),i}return(0,l.Z)(n,[{key:"keyword",get:function(){return this._keyword},set:function(t){this._keyword=t}},{key:"pagingInfo",get:function(){return this._pagingInfo},set:function(t){this._pagingInfo=t}},{key:"getMokList",get:function(){return this._getMokList}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"ra",get:function(){return this._ra},set:function(t){this._ra=t}},{key:"sort",get:function(){return this._sort},set:function(t){this._sort=t}},{key:"page",get:function(){return this._page},set:function(t){this._page=t,this.emit("list-change")}},{key:"pageSize",get:function(){return this._pageSize},set:function(t){this._pageSize!==t&&(this._pageSize=parseInt(t),this.page>1?this.listComp.page=1:this.emit("list-change"),null!==this.pagi&&(this.pagi.pageSize=parseInt(t)))}},{key:"dialog",get:function(){return this._dialog}},{key:"active",get:function(){return this.dialog.active},set:function(t){this.dialog.active=t}},{key:"init",value:function(){var t=this;this.dialog.create().then((function(){$("#".concat(t.id)).on("dialogclose",(function(e){t.reset()})),t.domInit(t)}))}},{key:"domInit",value:function(t){var e,n,a=this;this.isMobile?(this.createMokListComp(t),$("#".concat(t._id,' input[type="search"]')).on("click",(function(e){$("#".concat(t._id," .form_ip")).removeAttr("placeholder")})),$("#".concat(t._id," .btn_ip_search")).on("click",(function(e){if(""!==$("#".concat(t._id," .form_ip")).val()){var n={type:$("#".concat(t._id," #selectBook")).val(),ra:a.ra,len:a._pageSize,keyword:$("#".concat(t._id," .form_ip")).val(),pagingInfo:"",page:a.page};a.type=$("#".concat(t._id," #selectBook")).val(),a.keyword=n.keyword,a.searchReset(),a.getMokListData(n,t)}else t.ui.alert({code:"AL_15_0006"})})),$("#".concat(t._id," .form_ip")).on("keyup",(function(e){if("Enter"===e.code)if(""!==$("#".concat(t._id," .form_ip")).val()){var n={type:$("#".concat(t._id," #selectBook")).val(),ra:a.ra,len:a._pageSize,keyword:$("#".concat(t._id," .form_ip")).val(),pagingInfo:"",page:a.page};a.type=$("#".concat(t._id," #selectBook")).val(),a.keyword=n.keyword,a.searchReset(),a.getMokListData(n,t)}else t.ui.alert({code:"AL_15_0006"})}))):($("#".concat(t._id," #selectBook")).selectmenu(),this.createInkListComp(t),u()(e=$("#".concat(t._id))).call(e,'input[type="search"]').on("click",(function(t){$(".form_ip").removeAttr("placeholder")})),u()(n=$("#".concat(t._id))).call(n,".btn_ip_search").on("click",(function(e){if(""!==$("#".concat(t._id," .form_ip")).val()){var n={type:$("#".concat(t._id," #selectBook")).val(),ra:a.ra,len:a.pageSize,keyword:$("#".concat(t._id," .form_ip")).val(),pagingInfo:"",page:a._page};a.searchReset(),a.getData(n)}else t.ui.alert({code:"AL_15_0006"})})),$("#".concat(t._id," .form_ip")).on("keyup",(function(e){if(13===e.keyCode)if(""!==$("#".concat(t._id," .form_ip")).val()){var n={type:$("#".concat(t._id," #selectBook")).val(),ra:a.ra,len:a.pageSize,keyword:$("#".concat(t._id," .form_ip")).val(),pagingInfo:"",page:a._page};a.searchReset(),a.getData(n)}else t.ui.alert({code:"AL_15_0006"})})))}},{key:"searchReset",value:function(){var t;(this.listComp.empty(),this._page=1,this.isMobile)||u()(t=$("#popProdSearch")).call(t,".pagination").children().show()}},{key:"getData",value:function(t){var e=this,n="/api/comSearch";return null!=t&&(n+="?"+new(_())(t).toString()),this.$http(n).then((function(n){var a=$("#".concat(e._id," .form_search_box.has_sel")),i=$(".form_ip").val(),o=n.resultSet.result[0].totalSize;if(e.type=(0,m.U2)(t,"type"),e.pagingInfo=n.resultSet.result[0].brokerPagingInfo,e.keyword=t.keyword,e._pageSize=t.len,n.page=(0,m.U2)(t,"page",1),n.len=(0,m.U2)(t,"len"),n.type=(0,m.U2)(t,"type"),n.ra=(0,m.U2)(t,"ra"),n.keyword=(0,m.U2)(t,"keyword"),n.pagingInfo=(0,m.U2)(t,"pagingInfo"),o>0){var l;if($("#".concat(e._id," .tbl_prod_wrap.type_myroom")).show(),$("#".concat(e._id," .no_data.has_desc_lg")).remove(),$("#".concat(e._id," .list_result_wrap")).length>0)e.getElement("result.title").html(f()(l="'".concat(i,'\' 검색결과 <b class="fc_green">')).call(l,o,"</b>건"));else a.after(tt.call(e,o,i));e.ra=$("#selectSort").val(),t.ra=e.ra,e.listComp.data=n}else{var r;if($("#".concat(e._id," .tbl_prod_wrap.type_myroom")).hide(),$("#".concat(e._id," .list_result_wrap")).remove(),$("#".concat(e._id," .no_data.has_desc_lg")).remove(),e.listComp.empty(),$("#".concat(e._id," .list_result_wrap")).length>0)e.getElement("result.title").html(f()(r="'".concat(i,'\' 검색결과 <b class="fc_green">')).call(r,o,"</b>건"));else a.after(et.call(e,o,i))}return $("#selectSort").selectmenu({change:function(t){var n={keyword:e.keyword,ra:t.target.value,type:e.type,page:1,len:e._pageSize,pagingInfo:e.pagingInfo};e.ra=n.ra,e.getData(n)}}),n}))}},{key:"getMokData",value:function(t,e){var n=this,a="/api/comSearch";return null!=t&&(a+="?"+new(_())(t).toString()),this.$http(a).then((function(a){var i=$("#".concat(n._id," .contents_inner")),o=$(".form_ip").val(),l=a.resultSet.result[0].totalSize;if(n.type=(0,m.U2)(t,"type"),n.pagingInfo=a.resultSet.result[0].brokerPagingInfo,n.keyword=t.keyword,n._pageSize=t.len,a.page=(0,m.U2)(t,"page",1),a.type=(0,m.U2)(t,"type"),a.keyword=(0,m.U2)(t,"keyword"),a.pagingInfo=(0,m.U2)(t,"pagingInfo"),l>0){var r;if($("#".concat(n._id," .view_type_list")).show(),$("#".concat(n._id," .no_data.has_desc_lg")).remove(),$("#".concat(n._id," .list_result_wrap")).length>0)n.getElement("result.title").html(f()(r="'".concat(o,'\' 검색결과 <b class="fc_green">')).call(r,l,"</b>건"));else i.after(nt.call(n,l,o));n.ra=t.ra,a.ra=(0,m.U2)(t,"ra")}else $("#".concat(n._id," .view_type_list")).hide(),$("#".concat(n._id," .list_result_wrap")).remove(),$("#".concat(n._id," .no_data.size_lg.has_desc_lg")).remove(),i.after(at.call(n,l,o));return n.getElement("result.select").off("change").on("change",(function(t){var a={ra:t.target.value,type:n.type,keyword:n.keyword,page:n.page,len:n._pageSize,pagingInfo:n.pagingInfo};n.searchReset(),n.ra=a.ra,n.getMokListData(a,e)})),a}))}},{key:"createInkListComp",value:function(t){var e=this;this.listComp=new v.n({el:$("#".concat(t._id," .contentList")),render:{data:function(t){return t.resultSet.result[0].resultDocuments},item:function(n,a){return F.call(t,n,a,e.type)}},pagination:{el:$("#".concat(t._id," .pagination")),ready:function(){e.listComp.pagi.on("change",(function(t){e.page=t.value}))},mapUpdateData:function(t){return{total:t.resultSet.result[0].totalSize,page:e.page,size:e.pageSize}}}})}},{key:"createMokListComp",value:function(t){var e=this;this.listComp=new v.n({el:$("#".concat(t._id," .view_type_list .prod_list")),render:{data:function(t){return t.resultSet.result[0].resultDocuments},item:function(n,a){return X.call(t,n,a,e.type)}},pagination:{el:$("#".concat(t._id," .switch_prod_wrap .pagination")),events:{pagi_ready:function(e){e.options.el=$("#".concat(t.id," .pagination"))},change:function(t){e.page=t.value}},mapUpdateData:function(t){return{total:t.resultSet.result[0].totalSize,page:t.page,size:e._pageSize}}},infiniteScroll:this.isMobile})}},{key:"getInkListData",value:function(){var t=this,e={page:this._page,len:this._pageSize,type:this.type,ra:this.ra,keyword:this.keyword,pagingInfo:this.pagingInfo};this.getData(e).then((function(e){t.listComp.data=e}))}},{key:"getMokListData",value:function(t,e){var n,a=this,i={page:this._page,len:this._pageSize,type:this.type,ra:this.ra,keyword:this.keyword,pagingInfo:this.pagingInfo};null===(n=this.getMokData(i,e))||void 0===n||n.then((function(t){1===a.listComp.page&&a.listComp.empty(),a.listComp.append(t)}))}},{key:"reset",value:function(){this.selectBook="",this.selectSort="",$("#".concat(this._id," .form_ip")).val(""),$("#".concat(this._id," .dialog_contents .list_result_wrap")).remove(),this.listComp.empty()}}]),n}(g.Kp)},54569:function(t,e,n){n.d(e,{u:function(){return i}});var a=n(13792);function i(t){if((0,a.e$)(t,"code")){var e=(0,a.e$)(t,"code")?t:t.message||t;return this.ui.alert(e)}var n;if((n=t)&&n.stack&&n.message){var i=(0,a.e$)(t,"code")?t:t.message||t;return this.ui.alert(i)}var o=t.detailMessage;if(!o){var l=t.indexOf("{"),r=t.lastIndexOf("}"),s=t.substring(l,r+1);o=JSON.parse(s).detailMessage}return this.ui.alert(o||UiMessage.HTTP_ERROR)}},99693:function(t,e,n){n.d(e,{W:function(){return h}});var a=n(13535),i=n.n(a),o=n(68420),l=n(27344),r=n(90306),s=n(3020),c=n(3362),p=n(51956),u=n(96526),d=n(54174);function _(t){var e=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;n=i()(a,arguments,o)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var h=function(t){(0,r.Z)(n,t);var e=_(n);function n(){return(0,o.Z)(this,n),e.call(this,"app-revw",{initList:[p.InitPartial.AUTHORIZE]})}return(0,l.Z)(n,[{key:"satisfactionConfirm",value:function(t){var e=this;this.authorized&&this.ua.isMobileApp&&(null===(0,d.e)(t.cookieName)&&this.ui.alert({title:"오늘 교보문고 이용은 어떠신가요?\n마음에 드셨으면 좋겠어요 😊",showCancelButton:!0,cancelButtonText:"그냥 그래요",confirmButtonText:"좋아요!"}).then((function(n){(0,d.d)(t.cookieName,n.value.toString(),{expires:t.expiresNum}),n.value?(f("좋아요_"+t.eventName,"",t.eventName),e.appReviewAlert(t)):(f("그냥 그래요_"+t.eventName,"",t.eventName),e.customerServiceConfirm(t))})))}},{key:"customerServiceConfirm",value:function(t){this.ui.alert({title:"죄송합니다\n아쉬웠던 점을 알려주세요\n더 나은 서비스를 위해 노력하겠습니다",showCancelButton:!0,cancelButtonText:"괜찮아요",confirmButtonText:"1:1문의 남기기"}).then((function(e){e.value?(f("","1:1문의남기기",t.eventName),window.location.href=(0,u.$u)("/ONK/cscenter/qna-form")):f("","괜찮아요",t.eventName)}))}},{key:"appReviewAlert",value:function(t){var e=this,n=t.iosUrl,a=t.androidUrl;this.ui.alert({title:"감사합니다! 😊\n그렇다면 칭찬 리뷰를 남겨주세요\n큰 힘이 될거에요!",showCancelButton:!0,cancelButtonText:"다음에요",confirmButtonText:"네,좋아요!"}).then((function(i){i.value?(f("","네, 좋아요",t.eventName),window.location.href=e.ua.isAndroid?a:n):f("","다음에요",t.eventName)}))}}]),n}(p.UiPluginsModule);function f(t,e,n){""!==n&&null!==n&&window.ga360.GA_Event("click_"+n+"_MO",t,e,"","")}}},function(t){return t.O(0,[321,160,712],(function(){return e=89544,t(t.s=e);var e})),t.O()}])}));