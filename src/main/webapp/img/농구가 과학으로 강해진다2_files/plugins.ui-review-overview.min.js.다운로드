/*! @kyobobook/kbb-js v1.0.10 (build 20231201-105226) */
"use strict";!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.__KbbJS__=n():(e.__KbbJS__=e.__KbbJS__||{},e.__KbbJS__["plugins.ui-review-overview"]=n())}(self,(function(){return(self.webpackChunk_KbbJS_name_=self.webpackChunk_KbbJS_name_||[]).push([[592],{65172:function(e,n,t){t.d(n,{K:function(){return z}});var s=t(13535),r=t.n(s),a=t(33938),o=t(68420),i=t(27344),c=t(90306),l=t(3020),v=t(3362),d=t(63109),u=t.n(d),_=t(98882),p=t.n(_),b=t(51614),m=t.n(b),f=t(82324),w=t(7984),h=t(50047),y=t.n(h),x=t(12088),g=t.n(x),C=t(88066),N=t.n(C),k={bestEmotTag:void 0,bestEmotTagCount:void 0,buyRevwNumc:void 0,emotTagNumc1:void 0,emotTagNumc2:void 0,emotTagNumc3:void 0,emotTagNumc4:void 0,emotTagNumc5:void 0,revwRvgrAvg:void 0,revwRvgrNumc1:void 0,revwRvgrNumc2:void 0,revwRvgrNumc3:void 0,revwRvgrNumc4:void 0,saleCmdtid:void 0,whlRevwCont:void 0},R=function(e,n,t){return void 0!==n&&0!==(null==n?void 0:n.whlRevwCont)?function(e,n,t){var s,r=y()(e).call(e,(function(e){return'<div class="reply_score_item">\n                <div class="score_bar_box">\n                    <span class="num_score_bar">0%</span>\n                    <div class="score_bar"><span class="score_bar_inner" style="height: 0%;"></span></div>\n                </div>\n                <p class="text_reply">'.concat(null==e?void 0:e.revwEmtnKywrName,"</p>\n            </div>")})),a=g()({},k);g()(a,n);for(var o=0,i=0,c=1;c<=5;c++)i+=Number(a["emotTagNumc"+c]),o<Number(a["emotTagNumc"+c])&&(o=Number(a["emotTagNumc"+c]));function l(e){return"".concat(Math.round(e/i*100)||0,"%")}var v=y()(e).call(e,(function(e){return d(g()(e,{value:a["emotTagNumc"+e.exprSrmb]}))}));function d(e){var n,s,r,a,i,c,v=e.revwEmtnKywrName,d=e.value,u=l(d);return t?N()(n=N()(s=N()(r='\n        <div class="reply_score_item '.concat(o===d?"score_best":"",'">\n            <div class="score_bar_box">\n                <span class="num_score_bar">')).call(r,u,'</span>\n                <div class="score_bar"><span class="score_bar_inner" style="height: ')).call(s,u,';"></span></div>\n            </div>\n            <p class="text_reply">')).call(n,v,"</p>\n        </div>\n        "):N()(a=N()(i=N()(c='\n        <div class="reply_score_item '.concat(o===d?"score_best":"",'">\n          <div class="score_bar_box">\n              <span class="num_score_bar">')).call(c,u,'</span>\n              <div class="score_bar"><span class="score_bar_inner" style="height: ')).call(i,u,';"></span></div>\n          </div>\n          <p class="text_reply">')).call(a,v,"</p>\n      </div>\n        ")}o=0;for(var u=0,_=1;_<=4;_++)u+=Number(a["revwRvgrNumc"+_]),o<Number(a["revwRvgrNumc"+_])&&(o=Number(a["revwRvgrNumc"+_]));function p(e){return"".concat(Math.round(e/u*100)||0,"%")}var b,m,f,w,h,x,C,R,T=y()(s=[{rate:10,value:a.revwRvgrNumc4},{rate:7.5,value:a.revwRvgrNumc3},{rate:5,value:a.revwRvgrNumc2},{rate:2.5,value:a.revwRvgrNumc1}]).call(s,(function(e){return $(e)}));function $(e){var n,s,r,a,i=e.rate,c=e.value,l=p(c);return N()(n=N()(s=N()(r=N()(a='\n        <div class="score_bar_wrap">\n            <input type="number" class="form_rating" value="'.concat(i,'" title="평가점수 선택" readonly data-size="')).call(a,t?"sm":"xs",'" />\n            <div class="score_bar"><span class="score_bar_inner  ')).call(r,o===c?"score_best":"",'" style="width: ')).call(s,l,';"></span></div>\n            <span class="text_score_bar">')).call(n,l,"</span>\n        </div>\n        ")}return t?N()(b=N()(m='\n        <div class="klover_box_left">\n            <div class="box_top">\n                <p class="text_user_score">사용자 총점</p>\n                <input type="number" class="form_rating" value="'.concat(a.revwRvgrAvg||0,'" title="평가점수 선택" data-caption readonly />\n            </div>\n            <div class="box_bottom">\n                ')).call(m,T.join(""),"\n            </div>\n        </div>\n        ")).call(b,i>0?N()(f=N()(w='<div class="klover_box_right">\n                    <div class="box_top">\n                        <p class="text_good_respon">\n                            '.concat(l(a.bestEmotTagCount),'의 구매자가<br />\n                            <span class="fc_spot"><span class="review_quotes_text">')).call(w,a.bestEmtnKywrName,'</span></span> 라고 응답했어요\n                        </p>\n                    </div>\n                    <div class="box_bottom">\n                        <div class="reply_score_list">')).call(f,v.join(""),"</div>\n                    </div>\n                </div>"):'<div class="klover_box_right">\n            <div class="box_top">\n                <p class="text_good_respon"> 평가된 감성태그가<br />\n                    <span class="review_quotes_text">없습니다</span>\n                </p>\n            </div>\n            <div class="box_bottom">\n                <div class="reply_score_list">\n                  '.concat(r.join(""),"\n                </div>\n            </div>\n        </div>"),"\n        "):N()(h=N()(x='\n        <div class="klover_box_top">\n            <input type="number" class="form_rating" value="'.concat(a.revwRvgrAvg||0,'" title="평가점수 선택" data-caption readonly />\n            <div class="score_box">\n                ')).call(x,T.join(""),"\n            </div>\n        </div>\n        ")).call(h,i>0?N()(C=N()(R='<div class="klover_box_bottom">\n                      <div class="box_top">\n                          <p class="text_good_respon">\n                              '.concat(l(a.bestEmotTagCount),'의 구매자가<br />\n                              <span class="fc_spot"><span class="review_quotes_text">')).call(R,a.bestEmtnKywrName,'</span></span> 라고 응답했어요\n                          </p>\n                      </div>\n                      <div class="box_bottom">\n                          <div class="reply_score_list">')).call(C,v.join(""),"</div>\n                      </div>\n                  </div>"):'<div class="klover_box_bottom">\n                <div class="box_top">\n                    <p class="text_good_respon">\n                        <span class="review_quotes_text">평가된 감성태그가 없습니다</span>\n                    </p>\n                </div>\n                <div class="box_bottom">\n                    <div class="reply_score_list">\n                      '.concat(r.join(""),"\n                    </div>\n                </div>\n            </div>"),"\n        ")}(e,n,t):function(e,n){var t=y()(e).call(e,(function(e){return'<div class="reply_score_item">\n                <div class="score_bar_box">\n                    <span class="num_score_bar">0%</span>\n                    <div class="score_bar"><span class="score_bar_inner" style="height: 0%;"></span></div>\n                </div>\n                <p class="text_reply">'.concat(e.revwEmtnKywrName,"</p>\n            </div>")}));return n?'\n        <div class="klover_box_left">\n            <div class="box_top">\n              <p class="text_user_score">사용자 총점</p>\n              <input type="number" class="form_rating" value="0" title="평가점수 선택" data-caption readonly />\n            </div>\n            <div class="box_bottom">\n                <div class="score_bar_wrap">\n                    <input type="number" class="form_rating" value="10" title="평가점수 선택" readonly data-size="sm" />\n                    <div class="score_bar"><span class="score_bar_inner" style="width: 0%;"></span></div>\n                    <span class="text_score_bar score_best">0%</span>\n                </div>\n                <div class="score_bar_wrap">\n                    <input type="number" class="form_rating" value="7.5" title="평가점수 선택" readonly data-size="sm" />\n                    <div class="score_bar"><span class="score_bar_inner" style="width: 0%;"></span></div>\n                    <span class="text_score_bar">0%</span>\n                </div>\n                <div class="score_bar_wrap">\n                    <input type="number" class="form_rating" value="5" title="평가점수 선택" readonly data-size="sm" />\n                    <div class="score_bar"><span class="score_bar_inner" style="width: 0%;"></span></div>\n                    <span class="text_score_bar">0%</span>\n                </div>\n                <div class="score_bar_wrap">\n                    <input type="number" class="form_rating" value="2.5" title="평가점수 선택" readonly data-size="sm" />\n                    <div class="score_bar"><span class="score_bar_inner" style="width: 0%;"></span></div>\n                    <span class="text_score_bar">0%</span>\n                </div>\n            </div>\n        </div>\n        <div class="klover_box_right">\n            <div class="box_top">\n                <p class="text_good_respon"> 평가된 감성태그가<br />\n                    <span class="review_quotes_text">없습니다</span>\n                </p>\n            </div>\n            <div class="box_bottom">\n                <div class="reply_score_list">\n                  '.concat(t.join(""),"\n                </div>\n            </div>\n        </div>"):'\n            <div class="klover_box_top">\n                <input type="number" class="form_rating" value="0" title="평가점수 선택" data-caption readonly />\n                <div class="score_box">\n                    <div class="score_bar_wrap">\n                      <input type="number" class="form_rating" value="10" title="평가점수 선택" readonly data-size="xs" />\n                      <div class="score_bar"><span class="score_bar_inner score_best" style="width: 0%;"></span></div>\n                      <span class="text_score_bar score_best">0%</span>\n                    </div>\n                    <div class="score_bar_wrap">\n                      <input type="number" class="form_rating" value="7.5" title="평가점수 선택" readonly data-size="xs" />\x3c!-- 수정 220425 value 변경 --\x3e\n                      <div class="score_bar"><span class="score_bar_inner" style="width: 0%;"></span></div>\n                      <span class="text_score_bar">0%</span>\n                    </div>\n                    <div class="score_bar_wrap">\n                      <input type="number" class="form_rating" value="5" title="평가점수 선택" readonly data-size="xs" />\x3c!-- 수정 220425 value 변경 --\x3e\n                      <div class="score_bar"><span class="score_bar_inner" style="width: 0%;"></span></div>\n                      <span class="text_score_bar">0%</span>\n                    </div>\n                    <div class="score_bar_wrap">\n                      <input type="number" class="form_rating" value="2.5" title="평가점수 선택" readonly data-size="xs" />\x3c!-- 수정 220425 value 변경 --\x3e\n                      <div class="score_bar"><span class="score_bar_inner" style="width: 0%;"></span></div>\n                      <span class="text_score_bar">0%</span>\n                    </div>\n                </div>\n            </div>\n            <div class="klover_box_bottom">\n                <div class="box_top">\n                    <p class="text_good_respon">\n                        <span class="review_quotes_text">평가된 감성태그가 없습니다</span>\n                    </p>\n                </div>\n                <div class="box_bottom">\n                    <div class="reply_score_list">\n                      '.concat(t.join(""),"\n                    </div>\n                </div>\n            </div>")}(e,t)};var T=t(44680),E=t(49837);function S(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)(u().mark((function e(n){var t,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,E.wO)("review","statistics")+"?saleCmdtid="+n.saleCmdtid,e.next=4,this.$http(t,{method:"get"});case 4:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})))).apply(this,arguments)}function K(e){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(u().mark((function e(n){var t,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,E.wO)("review","emotionTags"),e.next=4,this.$http((0,T.customURL)(t,n),{method:"get"});case 4:return s=e.sent,e.abrupt("return",s.data);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})))).apply(this,arguments)}function P(e){var n=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,s=(0,v.Z)(e);if(n){var a=(0,v.Z)(this).constructor;t=r()(s,arguments,a)}else t=s.apply(this,arguments);return(0,l.Z)(this,t)}}var z=function(e){(0,c.Z)(r,e);var n,t,s=P(r);function r(e,n){var t;(0,o.Z)(this,r),t=s.call(this,e,"overview",n);var a=$(n.el);return t.setElement("root",n.el),t.setElement("content",p()(a).call(a,n.elContents)),t._elTitle=n.elTitle,t._serviceCode=n.serviceCode,t.modules.ready("ui-review-form").then((function(e){e.on(w.G2.SUBMIT_SUCCESS,(function(e){e.from;var n=e.pid;n&&(t._serviceCode=n),t.render(t.serviceCode)}))})),t}return(0,i.Z)(r,[{key:"$contents",get:function(){return this.getElement("content")}},{key:"serviceCode",get:function(){return this._serviceCode}},{key:"isPC",get:function(){return this.ua.isPC}},{key:"render",value:(t=(0,a.Z)(u().mark((function e(n){var t,s,r,a,o,i,c,l,v=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(this._serviceCode=n),void 0!==this.serviceCode){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,S.call(this,{saleCmdtid:this.serviceCode});case 5:return null!=(a=e.sent)&&a.data&&null!==(null==a||null===(t=a.data)||void 0===t?void 0:t.bestEmotTag)?this.$contents.removeClass("no_respon"):this.$contents.addClass("no_respon"),e.next=9,this.getEmotionTags((null==a||null===(s=a.data)||void 0===s?void 0:s.revwEmtnKywrPatrCode)||"001");case 9:o=e.sent,this.$contents.html(R(o,a.data,this.isPC)),void 0===a.data||0===(null===(r=a.data)||void 0===r?void 0:r.whlRevwCont)?this.$contents.addClass("no_respon"):this.$contents.removeClass("no_respon"),this.ui.pubScript("setStarRating",this.$contents),(i=$(".prod_review_box"))&&i.length>0&&$.ajax({url:"/html/review/".concat(n),type:"GET",dataType:"html",success:function(e){i.html(e),v.ui.pubScript("setStarRating",i),v.ua.isMobile?O():M()}}),(c=$("a[href='#scrollSpyProdReview']"))&&c.length>0&&p()(c).call(c,".num").html("(".concat(null===(l=a.data)||void 0===l?void 0:l.whlRevwCont,")"));case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getEmotionTags",value:(n=(0,a.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return isNaN(+n)&&(n="001"),e.next=3,K.call(this,{revwEmtnKywrPatrCode:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})}]),r}(f.ht);function M(){$(".prod_review_box .btn_go_review").length>0&&$(".prod_review_box .btn_go_review").on("click",(function(){var e,n;m()(e=window.location.host).call(e,"product")&&m()(n=window.location.pathname).call(n,"/detail")&&window.ga360.GA_Event("click_종이책_상품상세_PC","상단","","바로가기","");var t=Math.floor($("#scrollSpyProdReview").offset().top)-151;$("html, body").stop().animate({scrollTop:t},300)}))}function O(){$(".prod_review_box .btn_go_review").length>0&&$(".prod_review_box .btn_go_review").on("click",(function(){var e,n,t;m()(e=window.location.host).call(e,"product")&&m()(n=window.location.pathname).call(n,"/detail")&&window.ga360.GA_Event("click_종이책_상품상세_MO","상단","","바로가기","");var s=Math.floor($("#scrollSpyProdReview").offset().top)-46;if("product"===(null===(t=$("html"))||void 0===t?void 0:t.data("service")))$("html, body").stop().animate({scrollTop:s},{duration:300,step:function(e,n){var t=$("#scrollSpyProdReview").offset().top-46;n.end!==t&&(n.end=t)}});else $("html, body").stop().animate({scrollTop:s},300)}))}},48412:function(e,n,t){t.r(n);var s=t(13535),r=t.n(s),a=t(68420),o=t(27344),i=t(90306),c=t(3020),l=t(3362),v=t(82324),d=t(65172);function u(e){var n=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,s=(0,l.Z)(e);if(n){var a=(0,l.Z)(this).constructor;t=r()(s,arguments,a)}else t=s.apply(this,arguments);return(0,c.Z)(this,t)}}var _=function(e){(0,i.Z)(t,e);var n=u(t);function t(){var e;return(0,a.Z)(this,t),(e=n.call(this,"review-overview")).init(),e}return(0,o.Z)(t,[{key:"init",value:function(e){var n=null!=e&&e.el?null==e?void 0:e.el:'[data-event-detail="review"]',t=null!=e&&e.serviceCode?null==e?void 0:e.serviceCode:$(n).data("kbbfn-prod-pid");this._overview=new d.K(this,{el:n,elTitle:'[data-review-label="title"]',elContents:".klover_review_box",serviceCode:t}),this.render(t)}},{key:"render",value:function(e){this._overview.render(e)}}]),t}(v.YZ);n.default=new _}},function(e){return e.O(0,[321,160,712],(function(){return n=48412,e(e.s=n);var n})),e.O()}])}));