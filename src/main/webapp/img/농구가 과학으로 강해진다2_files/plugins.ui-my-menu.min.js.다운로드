/*! @kyobobook/kbb-js v1.0.10 (build 20231201-105226) */
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-my-menu"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_name_=self.webpackChunk_KbbJS_name_||[]).push([[845],{56874:function(t,e,a){a.r(e),a.d(e,{default:function(){return ct}});var n=a(13535),l=a.n(n),c=a(68420),r=a(27344),i=a(90306),o=a(3020),s=a(3362),u=a(12088),p=a.n(u),h=a(98882),b=a.n(h),d=a(69798),f=a.n(d),m=a(50047),_=a.n(m),v=a(49573),g=a.n(v),y=a(30699),k=a.n(y),E=a(88066),M=a.n(E),x=a(51956),w="category",C="service",D={set:"set",def:"del"},S={set:"set",delete:"del",save:"save",back:"back"},A={all:"all",check:"check",allCheck:"allCheck"},N=a(71649);function O(){return this.$http((0,x.getGlobalOption)("api.urls.common.exhib.menu"))}function L(t,e){var a={dsplMenuNum:t};return this.$http((0,x.getGlobalOption)("api.urls.common.exhib.addMenu"),{method:"POST",body:a})}function T(t,e){var a={dsplMenuNum:t};return this.$http((0,x.getGlobalOption)("api.urls.common.exhib.deleteMenu"),{method:"POST",body:a})}function I(){return this.$http((0,x.getGlobalOption)("api.urls.common.exhib.getCustomer"))}function K(t){var e=(0,x.createEl)("title_wrap title_size_md has_btn"),a=(0,x.createEl)({class:"fc_green",text:"0"},"span"),n=(0,x.createEl)("title_heading","span").append(["즐겨찾기 ",a]),l=(0,x.createEl)("right_area");return this.setElement("header.count",a),this.setElement("header.rightArea",l),e.append([n,l])}function U(t,e,a){var n,l=this,c=$('<button type="button" class="btn_xxs btn_line_primary"><span class="ico_favorite_setting"></span><span class="text">설정</span></button>'),r=$('<button type="button" class="btn_xxs btn_line_gray" '.concat(a?"disabled":"",'><span class="ico_favorite"></span><span class="text">전체해제</span></button>')),i=$('<button type="button" class="btn_xxs btn_primary" '.concat(a?"disabled":"",'><span class="ico_favorite_save"></span><span class="text">저장</span></button>'));[{el:c,key:S.set},{el:r,key:S.delete},{el:i,key:S.save}].forEach((function(t){var a=t.el,n=t.key;a.on("click",(function(t){switch(n){case S.set:l.emit("status-change",{layout:e,status:D.set});break;case S.delete:l.ui.alert({code:"AL_02_0005"}).then((function(t){var a,n;t.value&&(l.getElement("list.".concat(e)).length&&(b()(a=l.getElement("layout.".concat(e))).call(a,".fc_green").text("0"),b()(n=l.getElement("list.".concat(e))).call(n,".active").removeClass("active"),l["".concat(e,"MenuData")]=[]))}));break;case S.save:O.call(l,e).then((function(t){var a=t.data;((null==a?void 0:a.markCategory)||[]).length>0&&null!=l.welcomeModule&&e===w&&l.welcomeModule.emit("update-menu",{data:l.categoryMenuData}),l.emit("status-change",{layout:e,status:D.def})}))}}))}));var o=null;switch(t){case S.set:o=c;break;case S.delete:o=r;break;case S.save:o=i}return this.setElement(M()(n="btn.".concat(t,".")).call(n,e),o),o}function P(t){var e=(0,x.createEl)("fold_box_list","ul");return this.setElement("list.".concat(t),e),(0,x.createEl)({class:"fold_box_wrap type_line","data-type":"multi"}).append(e)}function F(t,e){var a,n=this;function l(e,a){var n=this,l=e.dsplMenuName,c=e.dsplMenuNum,r=e.active,i=e.saleCmdtDvsnCode,o=e.saleCmdtClstCode,s=e.mobileWebLinkUrladrs,u=(0,x.createEl)({class:"btn_favorite".concat(r?" active":""),type:"button",html:'<span class="menu_name">'.concat(l,'</span><span class="hidden">즐겨찾기 추가</span>')},"button");return u.on("click",(function(e){var r;if(n["".concat(t,"Status")]!==D.def){var p=u.hasClass("active"),h=b()(r=u.closest(".fold_box")).call(r,".fold_box_header .fc_green"),d=n.getElement("header.count"),f=parseInt(h.text()),m=parseInt(d.text());p?T.call(n,c,u).then((function(){var e;h.text(f-1),d.text(m-1),n["".concat(t,"MenuData")]=k()(e=n["".concat(t,"MenuData")]).call(e,(function(t){return t.dsplMenuNum!==c})),u.removeClass("active"),n.ui.toast("카테고리를 등록 해제했습니다.")})):L.call(n,c,u).then((function(){var e,r;h.text(f+1),d.text(m+1),n["".concat(t,"MenuData")]=M()(e=[]).call(e,(0,N.Z)(n["".concat(t,"MenuData")]),[{dsplMenuNum:c,saleCmdtDvsnCode:i,saleCmdtClstCode:o,text:M()(r="[".concat(a.dsplMenuName,"] ")).call(r,l)}]),u.addClass("active"),n.ui.toast("즐겨찾기에 선택한 카테고리를 등록했습니다.")}))}else window.location.href=(0,x.parseStageURL)(s)}))}return _()(a=k()(e).call(e,(function(t){var e=t.menuLvl,a=t.subLnb;return 0===e&&a.length>0}))).call(a,(function(t){var e,a,c;return(0,x.createEl)("fold_box".concat(t.subLnb.length?" expanded":""),"li").append([(0,x.createEl)({class:"fold_box_header",html:M()(e="".concat(t.dsplMenuName,' <span class="fc_green">')).call(e,k()(a=t.subLnb).call(a,(function(t){return t.active})).length,'</span> <button type="button" class="btn_fold"><span class="hidden">컨텐츠 열기</span></button>')}),t.subLnb.length?(0,x.createEl)("fold_box_contents").append((0,x.createEl)("menu_favorite_list","ul").append(_()(c=t.subLnb).call(c,(function(e){return(0,x.createEl)("favorite_item","li").append(l.call(n,e,t))})))):null])}))}var R=a(89356),Z=a.n(R),j=a(63263),B=a.n(j),G=a(58377),J=a.n(G),z=a(13038),H=a.n(z),V=a(44845),W=a(44721),q=a.n(W);function Q(t,e){var a=Z()(t);if(B()){var n=B()(t);e&&(n=k()(n).call(n,(function(e){return J()(t,e).enumerable}))),a.push.apply(a,n)}return a}function X(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(a),!0).forEach((function(e){(0,V.Z)(t,e,a[e])})):H()?Object.defineProperties(t,H()(a)):Q(Object(a)).forEach((function(e){Object.defineProperty(t,e,J()(a,e))}))}return t}function Y(t,e,a){a&&0===a.length&&(a=null);var n=k()(e).call(e,(function(t){return 0===t.menuLvl}));return _()(n).call(n,(function(n){return X(X({},n),{},{subLnb:k()(e).call(e,(function(e){var l=e.menuLvl,c=e.hgrnDsplMenuNum,r=e.dsplMenuNum;return null==a?1===l&&c===n.dsplMenuNum:(a.some((function(t){return t.dsplMenuNum===r}))?e.active=!0:e.active=!1,A.allCheck===t?1===l&&c===n.dsplMenuNum&&a:!(1!==l||c!==n.dsplMenuNum||!a)&&a.some((function(t){return t.dsplMenuNum===r})))}))})}))}function tt(t,e,a){var n,l;this["_".concat(t,"MenuData")]=_()(n=k()(l=a.data).call(l,(function(a){var n,l=a.dsplMenuNum;return q()(n=e[t===w?"markCategory":"markService"]).call(n,l)}))).call(n,(function(t){var e,n,l=t.dsplMenuName,c=t.hgrnDsplMenuNum,r=b()(e=a.data).call(e,(function(t){return 0===t.menuLvl&&t.dsplMenuNum===c}));return t.text=M()(n="[".concat(r.dsplMenuName,"] ")).call(n,l),t})),this["_".concat(t,"Data")]=a.data,this["_".concat(t,"Menu")]=Y(A[this["".concat(t,"MenuData")].length?"check":"all"],this["".concat(t,"Data")],this["".concat(t,"MenuData")])}var et=a(27545);function at(){$(".service_swiper_wrap").length>0&&$(".service_swiper_wrap").each((function(){var t=$(this);$(".swiper-slide",t).length>1?CustomSwiper(b()(t).call(t,".swiper-container").get(0),{slidesPerView:"auto",speed:500,scrollbar:{el:$(".swiper-scrollbar",t)[0],hide:!0}}):$(".swiper-scrollbar",t).remove()}))}function nt(){var t=$("#welcome_header_wrap .gnb_wrap"),e=b()(t).call(t,".anb_wrap");b()(e).call(e,".anb_area .tab_wrap").length>0&&b()(e).call(e,".anb_area .tab_wrap").on({tabsactivate:function(t,e){var a;$(e.newPanel).hasClass("anb_service")&&b()(a=$(e.newPanel)).call(a,".all_service_list").masonry({itemSelector:".anb_service .all_service_list .all_service_item",horizontalOrder:!0,transitionDuration:0,initLayout:!1}).masonry()}}),this.ui.pubScript("setTabs",b()(e).call(e,".tab_wrap")),this.ui.pubScript("setFoldBox","#tabAnbCategoryKyobo .fold_box_wrap"),this.ui.pubScript("setCustomScroll","#welcome_header_wrap .gnb_wrap .anb_area")}function lt(t){var e=function(){if("undefined"==typeof Reflect||!l())return!1;if(l().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=(0,s.Z)(t);if(e){var c=(0,s.Z)(this).constructor;a=l()(n,arguments,c)}else a=n.apply(this,arguments);return(0,o.Z)(this,a)}}var ct=new(function(t){(0,i.Z)(a,t);var e=lt(a);function a(){var t;return(0,c.Z)(this,a),(t=e.call(this,"my-menu",{initList:[x.InitPartial.AUTHORIZE],dependOn:[x.ResName.KBB_CM_SCRIPT]})).initOption(),t._categoryData=[],t._categoryMenu=[],t._categoryMenuData=[],t._serviceData=[],t._serviceMenu=[],t._cserviceMenuData=[],t.auth.ready().then((function(){t.emit(x.CommonEvent.PARTIAL_INIT,{name:x.InitPartial.AUTHORIZE})})),t.on("status-change",(function(e){var a=e.layout,n=e.status;t["".concat(a,"Status")]=n,t.updateDom(a,n)})),t}return(0,r.Z)(a,[{key:"initOption",value:function(){p()(this.options,{root:"#popMainMenu",category:"#tabFavoriteCategory",service:"#tabFavoriteService",store:".my_store"})}},{key:"categoryStatus",get:function(){return this._categoryStatus},set:function(t){this._categoryStatus=t}},{key:"serviceStatus",get:function(){return this._serviceStatus},set:function(t){this._serviceStatus=t}},{key:"$root",get:function(){return $(this.getOption("root"))}},{key:"categoryMenu",get:function(){return this._categoryMenu}},{key:"categoryData",get:function(){return this._categoryData}},{key:"categoryMenuData",get:function(){return this._categoryMenuData},set:function(t){this._categoryMenuData=t,this.categoryMenuData.length>0?this.getElement("btn.".concat(S.save,".category")).attr("disabled",!1):this.getElement("btn.".concat(S.save,".category")).attr("disabled",!0)}},{key:"serviceMenu",get:function(){return this._serviceMenu}},{key:"serviceData",get:function(){return this._serviceData}},{key:"serviceMenuData",get:function(){return this._serviceMenuData},set:function(t){this._serviceMenuData=t,this.categoryMenuData.length>0?this.getElement("btn.".concat(S.save,".service")).attr("disabled",!1):this.getElement("btn.".concat(S.save,".service")).attr("disabled",!0)}},{key:"welcomeModule",get:function(){return this.modules.get("uiWelcome")}},{key:"userModel",get:function(){return this.modules.get("user").model}},{key:"domReady",value:function(){var t,e=this,a=this.isMobile?"003":"002";if(this.ua.isMobile){var n;if(at.call(this),b()(t=this.$root).call(t,".quick_menu_list .attendance").on("click",(function(t){t.preventDefault();var a=(0,x.parseStageURL)("/EVT/daily-check");e.authorized&&e.ua.isMobile?window.location.href=a:e.auth.redirectLogin(a)})),this.authorized&&this.ua.isMobile)I.call(this).then((function(t){var e=t.data;null!=e&&null!=e&&e.strName})),O.call(this).then((function(t){var n,l=t.data;$("#welcome_my_content").css("display",l.markCategory.length>0?"block":"none");var c="/api".concat((0,x.getGlobalOption)("api.urls.common.exhib.catglnb"),"?termlDvsnCode=003&maxLevel=1");e.$http(c).then((function(t){tt.call(e,w,l,t),e.categoryDomInit()}));var r=M()(n="/api".concat((0,x.getGlobalOption)("api.urls.common.exhib.svrMenu"),"?termlDvsnCode=")).call(n,a,"&maxLevel=1");e.$http(r).then((function(t){tt.call(e,C,l,t),e.serviceDomInit()}))})).finally((function(){e.initialized=!0}));else b()(n=this.$root).call(n,'[href="#tabMainMenuFavorite"]').on("click",(function(t){t.preventDefault(),e.auth.redirectLogin()}))}else{var l=window.location.href;if(/\/perform\/test2[/]?$/.test(l)){var c=$("#welcome_header_wrap");return void b()(c).call(c,".anb_wrap .btn_anb").one("click.menu",(function(t){var a;f().allSettled(_()(a=[{id:"tabAnbCategorySam",url:"/display/pc/tabAnbCategorySam.html",encode:"UTF-8"},{id:"tabAnbCategoryHotTracks",url:"/display/pc/tabAnbCategoryHotTracks.html",encode:"EUC-KR"},{id:"tabAnbCategoryEbook",url:"/display/pc/tabAnbCategoryEbook.html",encode:"UTF-8"},{id:"tabAnbCategoryKyobo",url:"/display/pc/tabAnbCategoryKyobo.html",encode:"UTF-8"},{id:"tabAnbService",url:"/display/pc/tabAnbService.html",encode:"UTF-8"}]).call(a,(function(t){var e="/api/exhib/html";return null!=t&&(e+="?"+new(g())(t).toString()),(0,x.customFetch)(e).then((function(t){return t}))}))).then((function(t){var e;return _()(e=k()(t).call(t,(function(t){return"fulfilled"===t.status}))).call(e,(function(t){return t.value}))})).catch((function(t){})).then((function(t){var a,n,l,c=(a=t,l=b()(a).call(a,(function(t){return"tabAnbService"===t.id}))||null,(0,x.createEl)("anb_area").append((0,x.createEl)("tab_wrap").append([(0,x.createEl)("tab_list_wrap").append((0,x.createEl)("tabs","ul").append([(0,x.createEl)("tab_item","li").append((0,x.createEl)({href:"#tabAnbCategory",class:"tab_link"},"a").append((0,x.createEl)({class:"tab_text",text:"카테고리 전체보기"},"span"))),(0,x.createEl)("tab_item","li").append((0,x.createEl)({href:"#tabAnbService",class:"tab_link"},"a").append((0,x.createEl)({class:"tab_text",text:"서비스 전체보기"},"span")))])),(0,x.createEl)({id:"tabAnbCategory",class:"tab_content"}).append((0,x.createEl)("tab_wrap type_md channel").append((0,x.concat)([(0,x.createEl)("tab_list_wrap").append((0,x.createEl)("tabs","ul").append([(0,x.createEl)("tab_item","li").append((0,x.createEl)({href:"#tabAnbCategoryKyobo",class:"tab_link"},"a").append((0,x.createEl)({class:"tab_text",text:"교보문고"},"span"))),(0,x.createEl)("tab_item","li").append((0,x.createEl)({href:"#tabAnbCategoryEbook",class:"tab_link"},"a").append((0,x.createEl)({class:"tab_text",text:"eBook"},"span"))),(0,x.createEl)("tab_item","li").append((0,x.createEl)({href:"#tabAnbCategorySam",class:"tab_link"},"a").append((0,x.createEl)({class:"tab_text",text:"sam"},"span"))),(0,x.createEl)("tab_item","li").append((0,x.createEl)({href:"#tabAnbCategoryHotTracks",class:"tab_link"},"a").append((0,x.createEl)({class:"tab_text",text:"핫트랙스"},"span")))]))],_()(n=k()(a).call(a,(function(t){return"tabAnbService"!==t.id}))).call(n,(function(t){var e=t.html;return $(e)}))))),null!=l?$(l.html):null])));$(".anb_wrap").append(c),setTimeout((function(){nt.call(e),et.e_.call(e,"/INK/ink_wel_new/ink_wel@wel_14?callback=").then((function(t){var e,a=t||[];a.length>0&&b()(c).call(c,"#tabAnbCategory #tabAnbCategoryKyobo .banner_box").append((0,x.createEl)({href:a[0].linkUrl,class:"banner_link",html:M()(e='<img src="'.concat(a[0].imgFileUrl,'" alt="')).call(e,a[0].imgAltTagCntt,'">')},"a"))}))}))}))}))}et.e_.call(this,"/INK/ink_wel_new/ink_wel@wel_14?callback=").then((function(t){var e,a=t||[];a.length>0&&$("#tabAnbCategory #tabAnbCategoryKyobo .banner_box").append((0,x.createEl)({href:a[0].linkUrl,class:"banner_link",html:M()(e='<img src="'.concat(a[0].imgFileUrl,'" alt="')).call(e,a[0].imgAltTagCntt,'">')},"a"))}))}}},{key:"categoryDomInit",value:function(){var t=this.$root,e=b()(t).call(t,this.getOption(w));this.setElement("layout.".concat(w),e),this.emit("status-change",{layout:w,status:D[this.categoryMenuData.length?"def":"set"]})}},{key:"serviceDomInit",value:function(){var t=this.$root,e=b()(t).call(t,this.getOption(C));this.setElement("layout.".concat(C),e),this.emit("status-change",{layout:C,status:D[this.serviceMenuData.length?"def":"set"]})}},{key:"updateDom",value:function(t,e){var a=this,n=this.getElement("layout.".concat(t));switch(n.empty(),n.append([K.call(this,t),this["".concat(t,"MenuData")].length?null:(0,x.createEl)({class:"info_text_box",html:" 즐겨찾기 설정을 통해<br /> 즐겨 찾는 메뉴를 한번에 모아 볼 수 있어요 "}),P.call(this,t)]),e){case D.set:this.getElement("header.rightArea").empty().append([U.call(this,S.save,t,0===this["".concat(t,"MenuData")].length)]),this.getElement("list.".concat(t)).append(F.call(this,t,Y(A.allCheck,this["".concat(t,"Data")],this["".concat(t,"MenuData")])));break;case D.def:this.getElement("header.rightArea").empty().append([U.call(this,S.set,t)]),this.getElement("list.".concat(t)).append(F.call(this,t,Y(A.check,this["".concat(t,"Data")],this["".concat(t,"MenuData")])))}this.getElement("header.count").text(this["".concat(t,"MenuData")].length),setTimeout((function(){a.ui.pubScript("setFoldBox",n)}))}}]),a}(x.UiPluginsModule))},27545:function(t,e,a){a.d(e,{e_:function(){return l}});a(13792);var n=a(96526);function l(t){var e=(0,n.c2)("/api".concat((0,n._7)("api.urls.adv")),{url:t});return this.$http(e).catch((function(t){return[]}))}}},function(t){return t.O(0,[321,160,712],(function(){return e=56874,t(t.s=e);var e})),t.O()}])}));