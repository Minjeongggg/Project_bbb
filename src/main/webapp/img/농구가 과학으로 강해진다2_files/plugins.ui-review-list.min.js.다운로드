/*! @kyobobook/kbb-js v1.0.10 (build 20231201-105226) */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-review-list"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_name_=self.webpackChunk_KbbJS_name_||[]).push([[407],{47648:function(t,e,n){t.exports=n(72858)},76739:function(t,e,n){"use strict";n.d(e,{i:function(){return P},Q:function(){return D}});var i=n(13535),r=n.n(i),a=n(33938),o=n(44845),l=n(68420),s=n(27344),c=n(5281),u=n(32647),p=n(90306),h=n(3020),d=n(3362),f=n(63109),v=n.n(f),m=n(59104),_=n.n(m),E=n(38441),g=n(68345),b=n(73966),y=n(7984),w=n(71649),T=n(30699),k=n.n(T),C=n(50047),I=n.n(C),x=n(96526),A=[{value:b.aZ.CALUMNY,text:"비방, 명예훼손, 욕설, 혐오발언"},{value:b.aZ.PROMOTION,text:"홍보, 영리목적"},{value:b.aZ.OBSCENE,text:"음란, 유해, 불법정보"},{value:b.aZ.UNRELATED,text:"도서와 무관한 내용"},{value:b.aZ.PAPERING,text:"도배 및 내용이 없는 리뷰"},{value:b.aZ.ETC,text:"기타"}];function O(){var t=this;return(0,x.Rd)("btn_dialog_close","닫기","hidden").prepend((0,x.T0)("ico_dialog_close")).on("click",(function(){return t.close()}))}function S(){return(0,x.ut)("dialog_header").append(this.isMobile?(0,x.ut)("dialog_title").text("신고/차단"):(0,x.ut)("dialog_title","p").text("신고/차단"))}function R(){var t="신고 내용을 입력해 주세요.",e=(0,x.ut)("form_textarea","TEXTAREA").attr({title:t,placeholder:t,disabled:!0}).css({height:"".concat(this.isMobile?"68px":"55px")}).on("input",function(t){var e;if(this.isRequiredMessage){var n=_()(e=t.target.value).call(e).length;this.getElement("form.btn.declr").prop("disabled",!n)}}.bind(this)),n=(0,x.z3)(300,null,e).wrap;return this.setElement("form.content",e),(0,x.ut)("byte_check_wrap").append([e,(0,x.ut)("byte_check_footer").append(n)])}function B(t,e){var n,i=this,r=t.value,a=t.text,o=this.genElementId("rdoinput"),l=[o,e].join("_"),s=(0,x.ut)({id:l,type:"radio",name:o,value:r},"INPUT").on("change",(function(t){i.getElement("form.btn.declr").prop("disabled",!1),i.$selected=s})),c=(0,x.ut)({for:l,text:a},"LABEL"),u=k()(n=[(0,x.T0)("form_rdo").append([s,c]),"기타"!==a?void 0:R.call(this)]).call(n,Boolean);return(0,x.ut)("chk_col_item","LI").append(u)}function L(){var t=this,e=I()(A).call(A,(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return B.apply(t,n)})),n=(0,x.ut)("chk_col_list toggle_textarea_list","UL").append(e);return this.setElement("form.list.wrap",n),n}function N(){var t=this,e=this.isMobile?(0,x.ut)("title_heading fw_medium"):(0,x.ut)("info_text font_size_sm","P"),n=(0,x.Vx)(["round_gray_box type_sub","box_info_inner",L.call(this)]),i=(0,x.ut)("bul_item_asterisk|font_size_xxs|font_size_xs","P").append("허위 신고일 경우, 신고자의 서비스 활동이 제한될 수 있으니 유의하시어".concat(this.isMobile?" ":"<br>","신중하게 신고해 주세요.")),r=(0,x.ut)(this.isMobile?"title_wrap title_size_def":"custom_scroll_wrap").append([e.append(["신고 사유를 선택해 주세요.","신고 내용은 이용약관 및 정책에 의해 처리됩니다."].join("<br/>"))]),a=(0,x.Rd)("btn_md btn_primary","신고").on("click",(function(){return t.submit()})),o=(0,x.ut)(this.isMobile?"btn_wrap page_bottom":"btn_wrap").append(a),l=(0,x.ut)({class:"hr_style"},"hr"),s=this.isMobile?(0,x.ut)({class:"title_wrap title_size_def"},"div").append((0,x.ut)({class:"title_heading fw_medium",text:"이 글을 작성한 작성자의 모든 글은 블라인드 처리 됩니다."},"p")):(0,x.ut)({class:"info_text font_size_sm",text:"이 글을 작성한 작성자의 모든 글은 블라인드 처리 됩니다."},"p"),c=(0,x.Rd)("btn_md btn_line_gray","차단").on("click",(function(){return t.blockSubmit()})),u=(0,x.ut)("btn_wrap").append(c);return this.setElement("form.btn.declr",a),this.getElement("form.btn.declr").prop("disabled",!0),this.setElement("form.btn.block",c),(0,x.ut)("dialog_contents").append(this.isMobile?[r,n,i,o,l,s,u]:r.append([n,i,o,l,s,u]))}function Z(t){var e,n=this;this.$root.addClass("has_btn"),this.isMobile&&this.$root.attr({"data-class":"dialog_bottom"});var i=(0,w.Z)(I()(e=[O,S,N]).call(e,(function(t){return t.call(n)})));this.setOption("innerHtml",i)}function M(t){var e=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,d.Z)(t);if(e){var a=(0,d.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var P=function(t){(0,p.Z)(i,t);var e,n=M(i);function i(){var t;return(0,l.Z)(this,i),(t=n.call(this)).article=null,t._$selectedEl=null,t.once(g.cg.CREATE_BEFORE,(function(){return Z.call((0,c.Z)(t))})),t.on(g.cg.CLOSE,(function(){return t.clear()})),t.create().then((function(){return t.initialized=!0})),t}return(0,s.Z)(i,[{key:"auth",get:function(){return this.modules.get("auth")}},{key:"postId",get:function(){return this.getOption("post.id")},set:function(t){this.setOption("post.id",t)}},{key:"type",get:function(){return this.getOpion("post.type")},set:function(t){this.setOption("post.type",t)}},{key:"$selected",get:function(){return this._$selectedEl},set:function(t){var e=this;if(t!==this.$selected){null==t&&this.$selected&&this.$selected.prop("checked",!1),this._$selectedEl=t;var n=this.isRequiredMessage;this.$content.prop("disabled",!n),this.getElement("form.btn.declr").prop("disabled",n),n||setTimeout((function(){e.$content.trigger("focus").trigger("input").prop("selectionEnd")}))}}},{key:"code",get:function(){if(null!=this.$selected)return this.$selected.val()}},{key:"isRequiredMessage",get:function(){return this.code===b.aZ.ETC}},{key:"$content",get:function(){return this.getElement("form.content")}},{key:"contentValue",get:function(){var t;return _()(t=this.$content.val()).call(t)}},{key:"submit",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.article.data,r=i.id,a=i.type,l=(t={},(0,o.Z)(t,b.WT.REPORT_BAN_POST_TYPE,b.RA[a]),(0,o.Z)(t,b.WT.REPORT_BAN_ID,r),(0,o.Z)(t,b.WT.REPORT_BAN_CODE,n?b.aZ.ETC:this.code),t);return(this.isRequiredMessage||n)&&(l[b.WT.REPORT_BAN_MSG]=n?b.B.BLOCK:this.contentValue),b.SL.reportBan(l).then((function(){e.article.emit(y.Iv.UPDATE_ITEMS)})).catch((function(){return e.ui.alert(g.AQ.HTTP_ERROR)})).finally((function(){n?e.ui.alert("차단이 완료되었습니다.\n차단된 작성자의 글은 블라인드 처리됩니다.").then((function(){e.close()})):e.close()}))}},{key:"blockSubmit",value:function(){var t,e=this,n=this.article.data,i=n.id,r=n.type,a=n.authorId,l=$("html").data("service"),s=this.ua.isMobile?b.NH.MOBILE:b.NH.PC,c=this.ua.isMobileApp?this.ua.isAndroid?b.uz.ANDROID:b.uz.IOS:null,u=(t={},(0,o.Z)(t,b.WT.BLOCK_MMBR_NUM,a),(0,o.Z)(t,b.WT.BLOCK_POST_TYPE,b.RA[r]),(0,o.Z)(t,b.WT.BLOCK_POST_ID,i),(0,o.Z)(t,b.WT.BLOCK_TERML_DVSN_CODE,s),(0,o.Z)(t,b.WT.BLOCK_TERML_OS_TYPE_CODE,c),(0,o.Z)(t,b.WT.ONLN_JOB_DVSN_CODE,l?b.e4[l]:""),t);return b.SL.block(u).then((function(){e.ui.alert("차단이 완료되었습니다.\n차단된 작성자의 글은 블라인드 처리됩니다.").then((function(){e.article.emit(y.Iv.UPDATE_ITEMS),e.close(),e.isMobile||window.scrollTo({top:$("#ReviewList1").offset().top})}))})).catch((function(){return e.ui.alert(g.AQ.HTTP_ERROR)}))}},{key:"clear",value:function(){this.article=null,this.$selected=null,this.getElement("form.btn.declr").prop("disabled",!0),this.$content.val("").trigger("input")}},{key:"open",value:(e=(0,a.Z)(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.active&&null!=e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.auth.authorize();case 4:if(this.auth.authorized){t.next=6;break}return t.abrupt("return",this.ui.loginAlert());case 6:this.article=e,(0,u.Z)((0,d.Z)(i.prototype),"open",this).call(this);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),i}(E.a),D=new P},25202:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Te}});var i=n(13535),r=n.n(i),a=n(68420),o=n(27344),l=n(90306),s=n(3020),c=n(3362),u=n(82324),p=n(13792),h=n(68345),d=n(5281),f=n(32647),v=n(30699),m=n.n(v),_=n(47648),E=n.n(_),g=n(69798),b=n.n(g),y=n(98882),w=n.n(y),T=n(73273),k=n(73966),C=n(30702),I=n(7984),x=n(88066),A=n.n(x),O=n(89356),S=n.n(O),R=n(51956);function B(t){var e=this.getElement("view.filter.items"),n=w()(e).call(e,(function(e){return e.data("value")===t}));if(null!=n)return n.children("BUTTON")}function L(t,e){var n=this;if(t!==k.kD.ALL){var i,r,a=B.call(this,t);null!=a&&(0,T.setClassName)(a,C.Ne,!e)}else{var o;this.getElement("title.inner").text(A()(o="".concat("library"===(null==n||null===(i=n.options)||void 0===i||null===(r=i.render)||void 0===r?void 0:r.type)?"작성한 리뷰":"001"===n.listType?"댓글":"Klover 리뷰"," (")).call(o,(0,R.numberWithCommas)(e),")"))}}function N(t){var e,n,i=t.code,r=t.count,a=t.originData,o=L.bind(this);o(i,r);var l,s,c=this.productId;"detail"===(null==this||null===(e=this.options)||void 0===e||null===(n=e.render)||void 0===n?void 0:n.type)&&(c=(null==a||null===(l=a.list)||void 0===l?void 0:l.length)>0?null==a||null===(s=a.list[0])||void 0===s?void 0:s.pid:this.productId);return k.SL.getListCount(c).then((function(t){S()(t).forEach((function(e){if(e!==i){var n=t[e];o(e,n)}}))}))}function Z(){var t=this;$("#reviewRewardBtn").on(h.C9.CLICK,(function(){$("#popReviewRewardInfo").dialog("open")})),this.once(h.C9.INITIALIZED,(function(){t.$root.kbbfn(t).trigger(h.GU.READY,[t])})),this.bind([C.Iv.CHANGE_FILTER,C.Iv.CHANGE_SORT],(function(){t.pending||t.fetchData()})),this.on(C.Iv.UPDATE_ITEMS,(function(e){var n=e.method;switch(n){case"post":if(E()(t)!==k.Ny.LATEST)return void(t.sort=k.Ny.LATEST);break;case"delete":t.modules.ready("ui-review-form").then((function(e){e.emit(I.G2.SUBMIT_SUCCESS,{from:t,method:n})}))}t.fetchData()})),this.on(C.Iv.FETCH_DATA,(function(e){var n=e.data,i=e.append;if(N.call(t,{code:m()(t),count:n.total,originData:n}),t.isMobile&&i)return t.listComp.append(n);t.listComp.empty().data=n})),this.on(C.Iv.UPDATE_POST,(function(e){var n=e.from,i=t.getItem(n.postId);null!=i&&i.reload()}))}var M=n(71649),P=n(59104),D=n.n(P),U=n(50047),K=n.n(U),H=n(44721),z=n.n(H),G=n(1189),W=n.n(G),Q=n(76739),F=n(12088),V=n.n(F);function Y(t){var e=this,n=this.data.title,i=this.genElementId(["edit",this.postId].join("_")),r=this.listType===k.Qd.COMMENT;t.attr({"data-role":"btn-dialog","data-target":"#"+i});var a={type:r?"comment":"klover",id:this.postId,"list-for":this.listId,"prod-title":n};if(r){var o=$("#"+this.listId).data("kbbfn-cmnt-title"),l=(0,p.U2)(this.data,"data");V()(a,{"cmnt-id":(0,p.U2)(l,k.WT.REPLY_TOP_POST_ID),"cmnt-code":(0,p.U2)(l,k.WT.POST_STATUS),"cmnt-title":o,"prod-title":o})}return t.one(h.GU.READY,(function(t,n){n.listModule=e.uber})).kbbfn("ui-review-form",a)}function j(t){var e=this,n=this.listType.toLowerCase(),i=this.genElementId("post");t.attr({"data-role":"btn-dialog","data-target":"#"+i});var r={type:n,"list-for":this.id},a=this.getOption("prod");a&&S()(a).forEach((function(t){var e=a[t];null!=e&&(r["prod-"+t]=e)}));var o=this.getOption("cmnt");return o&&S()(o).forEach((function(t){var e=o[t];null!=e&&(r["cmnt-"+t]=e)})),t.one(h.GU.READY,(function(t,n){n.listModule=e})).kbbfn("ui-review-form",r)}function J(t){var e=this;t.length&&t.each((function(t,n){var i=$(n);j.call(e,i)}))}function q(t,e){var n,i,r,a=this.isMobile;switch(t){case"ico_spoiler":case"login":r="ico_arw",i=a?"hidden":"text",n=this.isMobile?"btn_more_show":"btn_xxs btn_line_gray";break;default:return}var o=(0,T.createBtnEl)(n,e,i);return r&&o.prepend((0,T.createSpanEl)(r)),o}function X(t,e,n){var i,r,a=q.apply(this,[e,n]),o=m()(i=[e?(0,T.createEl)(e):void 0,(0,T.createEl)("comment_status_text").append(m()(r=[t,a]).call(r,Boolean))]).call(i,Boolean),l=(0,T.createEl)("comment_status_box");return"ico_spoiler"===e&&this.isMobile&&l.addClass("type_row"),{wrap:l.append(o),button:a}}function tt(t){var e=this,n=(0,T.createBtnEl)("btn_xs btn_light_gray","취소").on("click",(function(){e.form=!1})),i=(0,T.createBtnEl)("btn_xs btn_primary disabled","등록").on("click",(function(){i.hasClass("disabled")||e.submit()}));null==t&&(t=function(t){var e,n=D()(e=t.target.value).call(e).length;(0,T.setClassName)(i,"disabled",!n)});var r=(0,T.createEl)({class:"form_textarea",title:"답글 입력",placeholder:"1000자 이내로 입력해주세요."},"TEXTAREA").on("input",t.bind(this)).on("keypress",(function(t){"ENTER"===t.code&&t.ctrlKey&&i.trigger("click")})),a=(0,T.createTextLenChecker)(1e3,null,r).wrap,o=(0,T.createEl)("byte_check_footer").append([a,(0,T.createEl)("btn_wrap").append([n,i])]);return{$formWrap:(0,T.createEl)("reply_write_area").append((0,T.createEl)("byte_check_wrap").append([r,o])),$textArea:r,$cancel:n,$submit:i}}var et={EDIT:"수정",DELETE:"삭제",REPORT:"신고/차단"};function nt(t){var e,n,i,r,a=this,o=this.data,l=o.authorLoginId,s=o.created,c=o.isBan,u=o.isBlockedBySelf,h={},d=m()(e=K()(n=this.editable?["edit","delete"]:["report"]).call(n,(function(e){var n;if(!(c&&"report"===e||u||z()(n=(0,p.U2)(t,"ignore",[])).call(n,e))){var i,r=function(t,e){return(0,T.createBtnEl)("btn_comment_util",t).attr("data-role",e)}(et[e.toUpperCase()],e);switch(e){case"report":i=function(){return Q.Q.open(a)};break;case"delete":i=function(){return a.delete()}}return i&&r.on("click",i.bind(a)),h[e]=r,r}}))).call(e,Boolean),f=A()(i=[l,s]).call(i,(0,M.Z)(d));return{children:W()(r=K()(f).call(f,(function(t,e){var n=(0,T.createSpanEl)("info_item").append(t);return f.length>e+1?[n,(0,T.createSpanEl)("gap"," | ")]:n}))).call(r),controls:h}}function it(t){var e=nt.call(this,t),n=e.children,i=e.controls;return{$wrap:(0,T.createEl)("user_info_box").append(n),controls:i}}var rt=n(49837);function at(){var t,e,n,i=this,r=this.getOption("type").toLowerCase(),a=(0,rt._7)("service.event.host").indexOf(window.location.host)>-1;return"klover"===r&&a?m()(e=K()(C.jq).call(C.jq,(function(e){switch(e){case k.o2.ALL:t="전체";break;case k.o2.PURCHASE:t="구매"}return i.isMobile||(t+=" 리뷰"),{label:t,value:e}}))).call(e,Boolean):m()(n=K()(C.GL).call(C.GL,(function(e){switch(e){case k.kD.ALL:t="전체";break;case k.kD.PURCHASE:t="구매";break;case k.kD.AFT_MONTH:t="한 달 후"}return i.isMobile||(t+=" 리뷰"),{label:t,value:e}}))).call(n,Boolean)}function ot(){var t=this,e=at.call(this);return K()(e).call(e,(function(e){var n=e.label,i=e.value,r=(0,T.createBtnEl)("tab_link",n,"tab_text");r.attr("onclick",t.isMobile?"ga360.GA_Event('click_종이책_상품상세_MO', '상세탭_리뷰', 'Klover리뷰', '탭_"+n+"', '');":"ga360.GA_Event('click_종이책_상품상세_PC', '상세탭_리뷰', 'Klover리뷰', '탭_"+n+"', '');");var a=(0,T.createEl)("tab_item","LI").attr("data-value",i).append(r);return i===m()(t)?a.addClass(C.Zx):r.addClass(C.Ne),a.on("click",(function(){r.hasClass(C.Ne)||(t.filter=a.data("value"))}))}))}function lt(){var t,e;return K()(t=K()(e=S()(k.Ny)).call(e,(function(t){var e,n=k.Ny[t];switch(n){case k.Ny.FAVORITE:e="좋아요 순";break;case k.Ny.LATEST:e="최신순"}return{label:e,value:n}}))).call(t,(function(t){var e=t.label,n=t.value,i=(0,T.createEl)(null,"OPTION").attr("value",n).text(e);return k.Ny.FAVORITE===n&&i.attr("selected",!0),i}))}function st(){var t,e,n,i,r,a,o,l,s,c,u,p=this,h=this.isMobile,d=ot.call(this),f=(0,T.createEl)("tabs","UL").append(d);this.setElement("view.filter.items",d);var v=lt.call(this),_=(0,T.createEl)(null,"SELECT").append(v);this.setElement("view.sort.options",v),this.setElement("view.sort.selector",_);var E,g=(0,T.createEl)(["form_sel type_sm||type_no_line"]).append(_),b=(0,T.createEl)("comment_list");if(this.isMobile){var y=(0,T.createSpanEl)("text");E=(0,T.createEl)("more_btn_wrap").append((0,T.createBtnEl)("btn_more_cont").append([y,(0,T.createSpanEl)("ico_arw")])),this.setElement("list.more.btn",E),this.setElement("list.more.text",y)}else E=(0,T.createEl)("pagination"),this.setElement("view.list.pagi",E);var w=(0,T.createEl)("comment_wrap").append(m()(t=[b,E]).call(t,Boolean));null!=this&&null!==(e=this.options)&&void 0!==e&&null!==(n=e.view)&&void 0!==n&&n.prdheader&&w.addClass("has_title"),"library"===(null==this||null===(i=this.options)||void 0===i||null===(r=i.render)||void 0===r?void 0:r.type)&&w.addClass("library"),"library-list"===(null==this||null===(a=this.options)||void 0===a||null===(o=a.render)||void 0===o?void 0:o.type)&&w.addClass("library"),this.setElement("view.list.wrap",w),this.setElement("view.list.content",b),this.isMobile&&E.on("click",(function(){var t,e=null===(t=p.listComp)||void 0===t?void 0:t.page;p.listComp.page=Number(e+1)}));var I,x=(0,T.createEl)("tab_list_wrap").append([f,(0,T.createEl)("right_area").append(g)]),A=this.getElement("view.wrap").empty();switch(this.listType){case k.Qd.COMMENT:I=w;break;case k.Qd.KLOVER_REVIEW:I=!1===(null==this||null===(l=this.options)||void 0===l||null===(s=l.view)||void 0===s?void 0:s.tabs)?w:[x,(0,T.createEl)("tab_content").append(w)]}!1===(null==this||null===(c=this.options)||void 0===c||null===(u=c.view)||void 0===u?void 0:u.tabs)||this.listType===k.Qd.COMMENT?A.replaceWith(I):A.append(I);var O=function(){var t=_.val();window.ga360.GA_Event(h?"click_종이책_상품상세_MO":"click_종이책_상품상세_PC","상세탭_리뷰","Klover리뷰","001"===t?"좋아요순":"최신순",""),p.setSession(C.U5.SORT,t),p.emit(C.Iv.CHANGE_SORT,{data:t})};return h?_.on("change",O):setTimeout((function(){_.selectmenu().on("selectmenuchange",O)})),A}var ct="data-kbbfn",ut="data-kbbfn-role";function pt(){var t,e=$(this.getOption("trigger"));this.setElement("root",e);var n=e.attr("id");null==n&&(n=this.uuid,e.attr("id",n)),this._id=n;var i=w()(e).call(e,"[".concat(ut,'="title"]')),r=w()(i).call(i,".title_heading");this.setElement("title.wrap",i),this.setElement("title.inner",r);var a=w()(e).call(e,"[".concat(ut,'="tab-view"]'));this.setElement("view.wrap",a);var o=["BUTTON[".concat("data-kbbfn-list-for","=").concat(this.id,"]"),":not([".concat(ct,"*=review-form])")].join(""),l=w()(t=this.ui.$contents).call(t,o);J.call(this,l),st.call(this)}var ht=n(56801),dt=n(89477),ft=n(33938),vt=n(63109),mt=n.n(vt);function _t(t){var e=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var Et=function(t){(0,l.Z)(n,t);var e=_t(n);function n(t,i){var r;return(0,a.Z)(this,n),(r=e.call(this,t))._data=i,r}return(0,o.Z)(n,[{key:"data",get:function(){return this._data},set:function(t){this._data=t,this.emit(C.VD.UPDATE_DATA,{data:t})}},{key:"postType",get:function(){return this.data.type}},{key:"postId",get:function(){return this.data.id}},{key:"editable",get:function(){return this.authorized&&this.user.get("sub")===this.data.authorId}}]),n}(u.Kp),gt=n(95238),bt=n.n(gt),yt=(n(49573),n(11006)),wt=n.n(yt);function Tt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null===t||(0===e?t=t.replace(/<|>|"|'|%|;|\(|\)|&|\+|-/g,""):1===e?(t=(t=t.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),t=wt()(t).call(t,/(?:\r\n|\r|\n|\\r|\\n)/g,"<br/>")):2===e&&(t=(t=t.replace(/</g,"%3C")).replace(/>/g,"%3E"))),t}function kt(){var t=this,e=it.call(this,{ignore:["report"]}),n=e.$wrap,i=e.controls;return S()(i).forEach((function(e){var n,r=i[e];if("edit"===e)n=function(){return t.toggleForm()};n&&r.off("click").on("click",n.bind(t))})),n}function Ct(){var t=(0,T.createEl)("reply_header").append(kt.call(this)),e=tt.call(this,(function(t){var e,n=D()(e=t.target.value).call(e)!==this.originContent;this.setClassName("form.submit","disabled",!n)})),n=e.$formWrap,i=e.$textArea,r=e.$submit;this.setElement("form.wrap",n),this.setElement("form.content",i),this.setElement("form.submit",r);var a=(0,T.createEl)("reply_text").html(Tt(this.data.content));this.setElement("content",a);var o=(0,T.createEl)("reply_contents").append([a,n]),l=(0,T.createEl)("reply_item").append([t,o]);this.setElement("root",l)}function It(t){var e=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var xt=function(t){(0,l.Z)(n,t);var e=It(n);function n(t,i){var r;return(0,a.Z)(this,n),r=e.call(this,t,i),Ct.call((0,d.Z)(r)),r.initialized=!0,r}return(0,o.Z)(n,[{key:"api",get:function(){return this.uber.api}},{key:"topPostId",get:function(){return this.uber.topPostId}},{key:"originContent",get:function(){return this.getElement("content").text()}},{key:"$formContent",get:function(){return this.getElement("form.content")}},{key:"formContent",get:function(){var t;return D()(t=this.$formContent.val()).call(t)},set:function(t){null==t&&(t=""),this.$formContent.val(t).trigger("input")}},{key:"form",get:function(){return this.getElement("form.wrap").hasClass("active")},set:function(t){var e=this;t!==this.form&&(this.uber.items.forEach((function(t){t!==e&&t.form&&(t.form=!1)})),this.formContent=t?this.originContent:"",this.setClassName("form.wrap","active",t),this.setClassName("content","hidden",t),t&&setTimeout((function(){var t=e.$formContent.val();t&&(e.$formContent.val(t+" "),e.$formContent.val(t)),e.$formContent.trigger("focus").prop("selectionEnd")})))}},{key:"toggleForm",value:function(){this.form=!this.form}},{key:"submit",value:function(){var t=this,e={id:this.postId,content:this.formContent};return this.api.update(e).then((function(){t.uber.emit(C.Iv.UPDATE_ITEMS)}))}},{key:"delete",value:function(){var t=this;return this.ui.alert({code:h.X4.AL_05_0027}).then((function(e){return e.value?t.api.delete(t.postId).then((function(){t.uber.emit(C.Iv.UPDATE_ITEMS)})):b().resolve()}))}}]),n}(Et);function At(){var t=(0,T.createEl)("auto_overflow_wrap");this.setElement("list.more.wrap",t);var e=(0,T.createEl)("reply_list");this.setElement("list.more.content",e);var n=(0,T.createBtnEl)("btn_more_body","답글 더보기").append((0,T.createSpanEl)("ico_arw"));n.on("click",(function(){(0,dt.Q2)(n),(0,T.setClassName)(t,"active",n.hasClass("active"))})),this.setElement("list.more.btn",n);var i=(0,T.createEl)("auto_overflow_contents").append((0,T.createEl)("auto_overflow_inner").append(e));return t.append([i,(0,T.createEl)("auto_overflow_footer").append(n)])}function Ot(){var t,e=this,n=tt.call(this),i=n.$formWrap,r=n.$textArea;this.setElement("form.wrap",i),this.setElement("form.content",r);var a=(0,T.createEl)("reply_list");this.setElement("list.main.content",a);var o,l=At.call(this),s=(0,T.createEl)("reply_list_area").append([a,l]);if(this.setElement("list.main.wrap",s),!this.authorized){var c=X.apply(this,["답글 등록은 로그인 후 이용할 수 있습니다.","login","로그인"]),u=c.wrap,p=c.button;o=u,p&&p.on("click",(function(){return e.ui.loginAlert()}))}var h=(0,T.createEl)("reply_wrap").hide().append(m()(t=[o,i,s]).call(t,Boolean));return this.setElement("root",h),h}function St(){var t=this;this.on(C.rf.FETCH_DATA,(function(e){var n=e.data,i=n.total,r=n.list;t.uber.getElement("reply.count").text(i),t.items=r})),this.on(C.rf.CHANGE_DISPLAY,(function(){t.items.forEach((function(t){return t.form=!1}))})),this.on(C.Iv.UPDATE_ITEMS,(function(){t.fetchList().then((function(){return t.formContent=""}))}))}function Rt(t){var e=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var Bt=5,Lt=function(t){(0,l.Z)(n,t);var e=Rt(n);function n(t){var i;return(0,a.Z)(this,n),(i=e.call(this,t))._api=new k.QJ({type:i.replyType,postType:(0,p.U2)(t,"postType"),listId:(0,p.U2)(t,"listId"),hgrnCmntNum:i.hgrnCmntNum,topPostId:i.topPostId}),i._items=[],Ot.call((0,d.Z)(i)),i.uber.$root.append(i.$root),St.call((0,d.Z)(i)),i.initialized=!0,i}return(0,o.Z)(n,[{key:"api",get:function(){return this._api}},{key:"isCmntType",get:function(){return this.uber.isCmntType}},{key:"topPostId",get:function(){return this.isCmntType?this.uber.uber.getOption("cmnt.id"):this.uber.postId}},{key:"hgrnCmntNum",get:function(){return this.isCmntType?this.uber.postId:0}},{key:"replyType",get:function(){return this.isCmntType?this.uber.uber.getOption("cmnt.code"):k.bg.KLOVER}},{key:"items",get:function(){return this._items},set:function(t){var e=this,n=K()(t).call(t,(function(t){return new xt(e,t)}));[{name:"main",args:[0,Bt]},{name:"more",args:[Bt]}].forEach((function(t){var i,r=t.name,a=t.args,o=e.getElement("list.".concat(r,".content")),l=K()(i=bt()(n).apply(n,(0,M.Z)(a))).call(i,(function(t){return t.$root}));o.empty().append(l),"more"===r&&n.length>Bt&&e.getElement("list.more.wrap").addClass("overflow")})),this._items=n,this.emit(C.rf.CHANGE_DISPLAY,{value:this.active})}},{key:"active",get:function(){return this.$root.is(":visible")},set:function(t){t!==this.active&&(this.form=t&&this.authorized,!t&&this.getElement("list.more.wrap").hasClass("active")&&this.getElement("list.more.btn").trigger("click"),this.$root[t?"show":"hide"](),this.active&&this.emit(C.Iv.UPDATE_ITEMS),this.emit(C.rf.CHANGE_DISPLAY,{value:t}))}},{key:"$formContent",get:function(){return this.getElement("form.content")}},{key:"formContent",get:function(){var t;return D()(t=this.$formContent.val()).call(t)},set:function(t){null==t&&(t=""),this.$formContent.val(t).trigger("input")}},{key:"form",get:function(){return this.getElement("form.wrap").hasClass("active")},set:function(t){var e=this;t!==this.form&&(this.setClassName("form.wrap","active",t),t?setTimeout((function(){e.$formContent.trigger("focus").prop("selectionStart")})):(this.formContent="",this.items.length||(this.active=!1)))}},{key:"toggle",value:function(){this.active=!this.active}},{key:"fetchList",value:function(){var t=this;return this.api.list().then((function(e){t.emit(C.rf.FETCH_DATA,{data:e})}))}},{key:"submit",value:function(){var t,e=this;this.authorized||(t="REPLY_LIST_UNAUTHORIZED");var n=this.formContent;if(n.length||(t="REPLY_LIST_NO_CONTENT"),t)return b().reject(new Error(t));var i={content:n};return this.api.post(i).then((function(){e.emit(C.Iv.UPDATE_ITEMS)})).catch((function(t){if((0,p.e$)(t,"code")){var n=(0,p.e$)(t,"code")?t:t.message||t;return e.ui.alert(n)}var i;if((i=t)&&i.stack&&i.message){var r=(0,p.e$)(t,"code")?t:t.message||t;return e.ui.alert(r)}var a=(0,p.U2)(t,"detailMessage");return e.ui.alert(a||h.AQ.HTTP_ERROR)}))}}]),n}(u.Kp),Nt=n(96526),Zt=k.Qd.COMMENT,Mt=[{code:k.T5.KYOBOBOOK,clsname:"badge_kyobo",label:"종이책"},{code:k.T5.EBOOK,clsname:"badge_ebook",label:"eBook"},{code:k.T5.HOTTRACKS,clsname:"badge_hottracks",label:"핫트랙스"}];function $t(t,e){return(0,T.createSpanEl)(["badge_sm badge_pill",e]).append((0,T.createSpanEl)("text",t))}function Pt(t){if(null!=t){var e=w()(Mt).call(Mt,(function(e){return e.code===t}));if(null!=e){var n=e.clsname;return $t(e.label,n)}}}function Dt(t){var e;switch(t){case k.kD.PURCHASE:e="구매자";break;case k.kD.AFT_MONTH:e="한달 후 리뷰"}if(null!=e)return $t(e,"badge_line_gray")}function Ut(){var t,e=this.data,n=e.siteCode,i=e.postType,r=m()(t=[Pt(n),Dt(i)]).call(t,Boolean);if(r.length)return(0,T.createSpanEl)("badge_box").append(r)}function Kt(){var t;switch(this.data.postType){case k.kD.PURCHASE:t="구매자";break;case k.kD.AFT_MONTH:t="한달 후 리뷰"}if(null!=t)return(0,T.createSpanEl)("review_type",t)}function Ht(){var t,e,n,i=this,r=it.call(this),a=r.$wrap,o=r.controls;if(S()(o).forEach((function(t){var e=o[t];if("edit"===t)Y.call(i,e)})),this.setElement("post.controls",o),this.listType===Zt)return a;if("library"===(null==this||null===(t=this.uber)||void 0===t||null===(e=t.options)||void 0===e||null===(n=e.render)||void 0===n?void 0:n.type))return a;var l=Ut.call(this);return a.prepend(l)}function zt(){var t,e,n,i=this.data,r=i.rating,a=i.emotion,o=(0,T.createEl)("form_rating","INPUT").attr({type:"number",value:r*I.cL,title:"평가점수 선택",readonly:!0,"data-size":"sm"});this.setElement("header.rating",o);var l,s=[o];null!=a&&(l=(0,T.createSpanEl)("review_quotes_text",a),this.setElement("header.emotion",l),s.push((0,T.createSpanEl)("gap","/"),l));var c=(0,T.createEl)("review_summary_wrap");return"library"!==(null==this||null===(t=this.uber)||void 0===t||null===(e=t.options)||void 0===e||null===(n=e.render)||void 0===n?void 0:n.type)||this.ua.isMobile?c.append(m()(s).call(s,Boolean)):[Kt.call(this),c.append(m()(s).call(s,Boolean))]}function Gt(){var t,e,n,i,r=this,a=[];"library"===(null==this||null===(t=this.uber)||void 0===t||null===(e=t.options)||void 0===e||null===(n=e.render)||void 0===n?void 0:n.type)?this.ua.isMobile?(a.push({fn:Kt}),a.push({fn:Ht}),a.push({fn:zt})):(a.push({name:"left",fn:zt}),a.push({name:"right",fn:Ht})):(a.push({name:"left",fn:Ht}),this.listType!==Zt&&a.push({name:"right",fn:zt}));var o=m()(i=K()(a).call(a,(function(t){var e=t.name,n=t.fn.call(r);if(null!=n){if(null==e)return n;var i=(0,T.createEl)(e+"_area");return r.setElement("header.".concat(e,".wrap"),i),i.append(n)}}))).call(i,Boolean);return(0,T.createEl)("comment_header").append(o)}function Wt(){var t,e,n=null==this||null===(t=this.uber)||void 0===t||null===(e=t.options)||void 0===e?void 0:e.view;if(null!=n&&n.prdheader){var i,r=this.data.data,a=r.cmdtName,o=r.cmdtcode,l=r.saleCmdtDvsnCode,s=r.saleCmdtid,c=$(A()(i='<p class="title_heading"><a href="'.concat((0,Nt.kR)({pid:s,bid:o,type:l}),'">')).call(i,a,"</a></p>"));return(0,T.createEl)("title_wrap title_size_sm").append(c)}return null}function Qt(){var t,e,n,i=null==this||null===(t=this.uber)||void 0===t||null===(e=t.options)||void 0===e||null===(n=e.render)||void 0===n?void 0:n.type;if("library"===i||"detail"===i){var r,a,o=this.data.data,l=o.cmdtName,s=o.cmdtcode,c=o.saleCmdtDvsnCode,u=o.saleCmdtid,p=o.kbcSiteCode,h=o.recdcode,d=o.imgUrl,f=(0,T.createS3ImgEl)({pid:null===h?u:h,bid:s,type:c,"img-path":d},!0,"100x0"),v=(0,Nt.kR)({pid:u,bid:s,type:c}),m=$('<div class="prod_thumb_box size_xs">\n      <a href="'.concat(v,'" class="prod_link">\n        <span class="img_box"></span>\n      </a>\n    </div>'));w()(m).call(m,".img_box").append(f);var _="종이책";"002"===p?_="eBook":"003"!==p&&"004"!==p||(_="핫트랙스");var E=$(A()(r=A()(a="  <div class='prod_info_box size_xs'>\n      <div class='prod_badge'>\n        <span class='badge_sm badge_pill badge_kyobo'><span class='text'>".concat(_,"</span></span>\n      </div>\n      <a href='")).call(a,v,"' class='prod_info'>\n        <span class='prod_name'>")).call(r,l,"</span>\n      </a>\n    </div>"));return(0,T.createEl)("prod_area horizontal").append([m,E])}return null}var Ft=function(t){var e=(0,T.createEl)("comment_text").html(Tt(t));return this.setElement("content.text",e),(0,T.createEl)("comment_text_box").append(e)},Vt=function(t){if(t.length){var e=t[0];return(0,T.createEl)("comment_thumb_box").append([(0,T.createSpanEl)("comment_thumb_view").attr("style",'background-image: url("'.concat(e,'")')).append((0,T.createEl)({src:e,alt:"리뷰 썸네일"},"img")),t.length>1?(0,T.createSpanEl)("thumb_count").text(t.length):""])}},Yt=function(t){var e,n;if(t.length){var i=K()(t).call(t,(function(t){var e=(0,T.createBtnEl)("btn_view_img").append((0,T.createEl)({src:t},"IMG")).on("click",(function(e){window.open(t)})),n=(0,T.createEl)("comment_img_box").css({"background-image":'url("'.concat(t,'")')}).append(e);return(0,T.createEl)("swiper-slide","LI").append(n)})),r=this.isMobile?(0,T.createEl)("swiper-pagination"):K()(e=["next","prev"]).call(e,(function(t){return(0,T.createEl)("swiper-button-"+t).append((0,T.createSpanEl)("hidden","next"===t?"다음":"이전"))})),a=(0,T.createEl)("swiper-container").append((0,T.createEl)("swiper-wrapper","UL").append(i));this.setElement("content.swiper.cont",a);var o=W()(n=[a,r]).call(n),l=(0,T.createEl)("comment_swiper_wrap").append(o);return this.setElement("content.swiper.wrap",l),l}};function jt(){var t=this,e=this.data,n=e.isBlind,i=e.isBanBySelf,r=e.isBanByOthers,a=e.isBlockedBySelf,o=e.isSpoiler;if(n){var l,s,c="ico_report";if(i||a?l="고객님 요청에 의해 블라인드 처리 되었습니다.":r?l="다른 고객님들의 요청에 의해 블라인드 처리되었습니다.":o&&(l='이 리뷰에는 <span class="fw_bold">스포일러가 포함</span>되어있습니다.',c="ico_spoiler",s="보기"),null!=l){var u=X.apply(this,[l,c,s]),p=u.wrap,h=u.button;return h&&h.one("click",(function(){p.hide(),["content.inner","footer.wrap"].forEach((function(e){return t.getElement(e).show()})),(0,dt.PA)(t.$root,t.getElement("content.inner"))})),p}}}function Jt(){var t,e,n,i,r,a,o=this.data,l=o.imageUrls,s=o.content,c=o.isBlind,u=(0,T.createEl)("comment_contents_inner"),p=l,h=(0,T.createEl)("comment_view_wrap").append(m()(t=[Ft.call(this,s),"detail"!==(null==this||null===(e=this.uber)||void 0===e||null===(n=e.options)||void 0===n||null===(i=n.render)||void 0===i?void 0:i.type)?Vt(p):""]).call(t,Boolean));u.append(m()(r=[h,Yt.call(this,p)]).call(r,Boolean)),this.setElement("content.inner",u),c&&u.hide();var d=this.getElement("content.wrap");return this.initialized&&d.empty(),d.append(m()(a=[u,jt.call(this)]).call(a,Boolean))}var qt=n(51614),Xt=n.n(qt);function te(){var t,e,n=this,i=this.data,r=i.firstPostId,a=i.aMonthPostId,o=m()(t=K()(e=[{id:a,label:"한달 후 리뷰 보기"},{id:r,label:"이 구매자의 첫 리뷰 보기"}]).call(e,(function(t){var e=t.id,i=t.label;if(null!=e){var r=(0,T.createBtnEl)("btn_more_view fc_spot",i).append((0,T.createSpanEl)("ico_arw"));return r.on("click",(function(){n.ui.popup({review:{pid:e,title:i}})})),r}}))).call(t,Boolean);if(o.length)return(0,T.createEl)("left_area").append(o)}function ee(){var t=this,e=this.data,n=e.isLike,i=e.likeCount,r=i>9999?"9999+":i,a=(0,T.createBtnEl)("btn_like",r).prepend((0,T.createSpanEl)("ico_like"));return this.setElement("footer.like.wrap",a),this.setElement("footer.like.count",a.children(".text")),a.on("click",(function(){var e,n,i,r,o;return t.editable?t.ui.alert("자신의 글에 공감하실 수 없습니다."):"detail"===(null==t||null===(e=t.uber)||void 0===e||null===(n=e.options)||void 0===n||null===(i=n.render)||void 0===i?void 0:i.type)?t.ui.alert("상세팝업에서는 공감 해제 불가능합니다."):(Xt()(r=window.location.host).call(r,"product")&&Xt()(o=window.location.pathname).call(o,"/detail")&&window.ga360.GA_Event(t.isMobile?"click_종이책_상품상세_MO":"click_종이책_상품상세_PC","상세탭_리뷰","Klover리뷰",a.hasClass("active")?"좋아요취소":"좋아요",""),void t.toggleLike())})),n&&a.addClass("active"),a}function ne(){var t=this,e=this.data,n=e.reviewCommentCount,i=e.replyCommentCount,r=void 0!==i?(0,T.createSpanEl)("count",i):(0,T.createSpanEl)("count",n),a=(0,T.createBtnEl)("btn_reply").append([(0,T.createSpanEl)("ico_reply"),(0,T.createSpanEl)("text","답글 ").append(r)]).on("click",(function(){t.reply.toggle()}));return this.setElement("reply.count",r),this.setElement("reply.toggleBtn",a),a}function ie(){var t,e,n=this;return(0,T.createEl)("right_area").append(m()(t=K()(e=[ee,ne]).call(e,(function(t){return t.call(n)}))).call(t,Boolean))}function re(){var t,e,n=this;return(0,T.createEl)("comment_util_box").append(m()(t=K()(e=[te,ie]).call(e,(function(t){return t.call(n)}))).call(t,Boolean))}function ae(){var t=(0,T.createBtnEl)("btn_more_body","펼치기").attr("data-btn-toggle","").append((0,T.createSpanEl)("ico_arw")),e=this.getElement("footer.wrap");return this.initialized&&e.empty(),e.append([t,re.call(this)]),this.data.isBlind&&e.hide(),e}function oe(){var t="comment_item";this.data.hasRelatedPost&&(t+=" has_btn");var e=(0,T.createEl)(t).attr("data-id",this.postId);this.setElement("root",e)}function le(){var t,e=this,n=(0,T.createEl)("comment_contents"),i=(0,T.createEl)("comment_footer");this.setElement("content.wrap",n),this.setElement("footer.wrap",i);var r=K()(t=[Qt,Wt,Gt,Jt,ae]).call(t,(function(t){return t.call(e)}));this.$root.append(r)}function se(){oe.call(this),le.call(this)}function ce(){var t=this;if(!this.uber.isCmntType){var e=this.data,n=e.rating,i=e.emotion;this.getElement("header.rating").rating("update",n*I.cL),this.getElement("header.emotion").text(i)}[Jt,ae].forEach((function(e){return e.call(t)}));var r=(0,dt.mJ)(this.$root);(0,dt.$2)(r)}function ue(t){var e=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var pe=function(t){(0,l.Z)(s,t);var e,n,i,r=ue(s);function s(t,e){var n;return(0,a.Z)(this,s),(n=r.call(this,t,e)).on(C.Iv.UPDATE_ITEMS,(function(){n.uber.emit(C.Iv.UPDATE_ITEMS)})),se.call((0,d.Z)(n)),n._reply=new Lt((0,d.Z)(n)),n.reply.ready().then((function(){n.initialized=!0})),n}return(0,o.Z)(s,[{key:"listId",get:function(){return this.uber.id}},{key:"listType",get:function(){return this.uber.listType}},{key:"isCmntType",get:function(){return this.uber.listType===k.Qd.COMMENT}},{key:"reply",get:function(){return this._reply}},{key:"genElementId",value:function(t){return[this.listId,t].join("_")}},{key:"toggleLike",value:(i=(0,ft.Z)(mt().mark((function t(){var e,n,i=this;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.auth.authorize();case 2:if(this.auth.authorized){t.next=4;break}return t.abrupt("return",this.ui.loginAlert());case 4:return e=(0,p.ei)(this.data,["id","type","data"]),n=this.uber.isCmntType?k.j7:k.SL,t.abrupt("return",n.toggleLike(e).then((function(t){var e=t.active,n=t.count,r=t.item;i.setClassName("footer.like.wrap","active",e),i.getElement("footer.like.count").text(n),i.data=r})));case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"reload",value:(n=(0,ft.Z)(mt().mark((function t(){var e,n;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized){t.next=2;break}return t.abrupt("return");case 2:return this.ui.loading=!0,e=this.uber.isCmntType?k.j7:k.SL,n=this.uber.isCmntType?V()({id:this.postId},this.uber.options):this.postId,t.next=7,e.get(n);case 7:this._data=t.sent,ce.call(this),this.ui.loading=!1;case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"delete",value:(e=(0,ft.Z)(mt().mark((function t(){var e,n=this;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ui.alert({code:h.X4.AL_05_0027});case 2:if(t.sent.value){t.next=6;break}return t.abrupt("return");case 6:return e=this.uber.isCmntType?k.j7:k.SL,t.abrupt("return",e.delete(this.postId).then((function(){n.uber.emit(C.Iv.UPDATE_ITEMS,{method:"delete"})})));case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),s}(Et);function he(t){var e=new pe(this,t);return this.items.push(e),e.ready().then((function(){return e.$root}))}var de="Klover리뷰를 작성해 보세요.";function fe(){var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isMobile){var i=this.getElement("list.more.btn");if(null!=i||i.length){if(!n)return $(".comment_list").show(),i.hide();var r=null===(t=this.listComp)||void 0===t?void 0:t.pagi;if(null!=r&&r.availNext){var a=A()(e="더보기 ".concat(r.value,"/")).call(e,r.length);this.getElement("list.more.text").text(a),i.show()}}}}function ve(t){switch(t){case k.Qd.COMMENT:return"등록된 댓글이 없습니다.";case k.Qd.KLOVER_REVIEW:return"myroom"!==h.H6?de:[(0,T.createEl)({text:de},"P"),(e=(0,T.createEl)({type:"button",class:"btn_sm btn_line_gray","data-role":"btn-dialog","data-kbbfn":"ui-review-form","data-target":"#popKillingPart",html:'<span class="text">Klover리뷰 작성</span>'},"BUTTON").kbbfn(),(0,T.createEl)("btn_wrap").append(e))]}var e;return"등록된 포스트가 없습니다."}function me(){var t=this,e=this.getElement("view.list.content");var n,i,r={el:e,render:function(e){var n=e.list,i=K()(n).call(n,(function(e){return he.call(t,e)}));return b().all(i)},events:{renderStart:function(){var t,e;this._items=[],fe.call(this,!1),"library-list"===(null==this||null===(t=this.options)||void 0===t||null===(e=t.render)||void 0===e?void 0:e.type)&&$("#ReviewList1").hide()}.bind(this),renderFinish:function(){var t,n;if((0,dt.F7)(e),fe.call(this,!0),"library-list"===(null==this||null===(t=this.options)||void 0===t||null===(n=t.render)||void 0===n?void 0:n.type)){var i,r=$("#ReviewList1"),a=w()(i=$(".comment_wrap",r)).call(i,".comment_item");a&&a.length>0?($(".comment_wrap",r).show(),$(".list_result_wrap",r).show(),$("#library-list-no-data",r).hide()):($(".comment_wrap",r).hide(),$(".list_result_wrap",r).hide(),$("#library-list-no-data",r).show()),r.show()}}.bind(this)},landing:{elements:(i=(0,T.createEl)("no_data_desc"),(0,p.HD)(n)?i.text(n):((0,T.isElement2)(n)||(0,p.kJ)(n))&&i.append(n),{wrap:(0,T.createEl)("no_data size_sm has_line").append(i),content:i}),message:{loading:h.AQ.LOADING,noResult:ve(this.listType)}}},a={el:this.getElement("view.list.pagi"),events:{change:function(e){var n=e.value;"klover"===t.options.type&&"comment"!==t.options.type?t.isMobile?t.fetchData({page:n}).then((function(){var t=new window.CustomEvent("scroll");window.dispatchEvent(t)})):(window.scrollTo({top:$("#ReviewList1").offset().top}),t.fetchData({page:n})):t.fetchData({page:n})}}};return V()(r,{pagination:a}),this._listComp=new ht.ListComponent(r),this.listComp}function _e(){var t=this.getOption("type").toLowerCase(),e=k.Qd.KLOVER_REVIEW;if("comment"===t)e=k.Qd.COMMENT;return e}function Ee(t){var e,n,i=this.getOption("cmnt"),r="/library/review"===window.location.pathname||z()(e=window.location.pathname).call(e,"/library/list/detail");switch(this.listType){case k.Qd.COMMENT:n={cmntSrceCttsCode:null==i?void 0:i.code,cmntCttsIdnfNum:null==i?void 0:i.id},null!=i&&i.list&&V()(n,{cmntCttsIdnfNumList:null==i?void 0:i.list});break;case k.Qd.KLOVER_REVIEW:n={pid:this.productId,type:m()(this),sort:E()(this)}}if(r){var a,o,l,s,c,u,p,h,d;t.mmbrNumSearchYsno="Y";var f=this.getOption("prod");t.cmdtName=null==f||null===(a=f.cmdt)||void 0===a?void 0:a.name,t.cretDttmEnd=null==f||null===(o=f.cret)||void 0===o||null===(l=o.dttm)||void 0===l?void 0:l.end,t.cretDttmStart=null==f||null===(s=f.cret)||void 0===s||null===(c=s.dttm)||void 0===c?void 0:c.start,t.kbcSiteCode=null==f||null===(u=f.kbc)||void 0===u||null===(p=u.site)||void 0===p?void 0:p.code,t.revwPatrCode=null==f||null===(h=f.revw)||void 0===h||null===(d=h.patr)||void 0===d?void 0:d.code}return n?V()(n,t):t}function ge(t){var e=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var be=function(t){(0,l.Z)(n,t);var e=ge(n);function n(t,i){var r;return(0,a.Z)(this,n),(r=e.call(this,t,null,i))._listType=_e.call((0,d.Z)(r)),r._listComp=null,r._items=[],r._filter=k.kD.ALL,r._date=null,Z.call((0,d.Z)(r)),r.init().then((function(){r.initialized=!0})),r}return(0,o.Z)(n,[{key:"listType",get:function(){return this._listType}},{key:"isCmntType",get:function(){return this.listType===k.Qd.COMMENT}},{key:"productId",get:function(){return this.getOption("prod.pid")}},{key:"reviewable",get:function(){return"N"!==this._data.reviewWrite}},{key:"filter",get:function(){return this._filter},set:function(t){m()(this)!==t&&(this._filter=t,this.getElement("view.filter.items").forEach((function(e){var n=e.data("value")===t;(0,T.setClassName)(e,C.Zx,n)})),this.emit(C.Iv.CHANGE_FILTER,{data:t}))}},{key:"sort",get:function(){var t=this.getElement("view.sort.selector");if(null!=t)return t.val()},set:function(t){if(E()(this)!==t){var e=this.getElement("view.sort.selector");e.val(t),e.selectmenu("instance")?e.selectmenu("refresh").trigger("selectmenuchange"):e.trigger("change")}}},{key:"listComp",get:function(){return this._listComp}},{key:"pending",get:function(){return null!=this.listComp&&this.listComp.pending},set:function(t){if(t!==this.pending){var e=t?h.Gs.RENDER_START:h.Gs.RENDER_FINISH;this.listComp.emit(e)}}},{key:"items",get:function(){return this._items}},{key:"init",value:function(){return pt.call(this),me.call(this),this.fetchData()}},{key:"genElementId",value:function(t){return(0,f.Z)((0,c.Z)(n.prototype),"genElementId",this).call(this,t,this.id)}},{key:"fetchData",value:function(){var t,e,n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(r&&this.pending)return b().reject(new Error("이미 데이터가 로드중입니다."));var a=Ee.call(this,i);r&&(this.pending=!0,this.listType===k.Qd.KLOVER_REVIEW&&["type","sort"].forEach((function(t){var e=(0,p.U2)(i,t);if(null!=e){var r="type"===t?"filter":t;e!==n[r]&&(n[r]=e)}})));var o=(0,p.U2)(i,k.WT.PAGE),l=this.isCmntType?k.j7:k.SL;return("detail"===(null==this||null===(t=this.options)||void 0===t||null===(e=t.render)||void 0===e?void 0:e.type)?l.detail(this.productId):l.list(a)).then((function(t){return r||b().resolve(t),new(b())((function(e){n._data=t,n.listComp.once(h.Gs.RENDER_FINISH,(function(){return e(t)})),n.emit(C.Iv.FETCH_DATA,{data:t,append:o})}))})).catch((function(){n.pending=!1}))}},{key:"getItem",value:function(t){var e;return w()(e=this.items).call(e,(function(e){return e.postId===t}))}}]),n}(u.ht);function ye(t){var e=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var a=(0,c.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,s.Z)(this,n)}}var we=function(t){(0,l.Z)(n,t);var e=ye(n);function n(){var t;return(0,a.Z)(this,n),(t=e.call(this,"review-list",{initList:[h.bn.AUTHORIZE]}))._items=[],t.authorize().then((function(){t.emit(h.C9.PARTIAL_INIT,{name:h.bn.AUTHORIZE})})),t}return(0,o.Z)(n,[{key:"items",get:function(){return this._items}},{key:"create",value:function(t){var e=new be(this,t);return this.items.push(e),e}},{key:"isAvailReview",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(0,p.U2)(this.items,t);return null==e||e.reviewable}}]),n}(u.YZ),Te=new we},2948:function(t,e,n){n(4115);var i=n(35703);t.exports=i("Array").sort},69355:function(t,e,n){var i=n(7046),r=n(2948),a=Array.prototype;t.exports=function(t){var e=t.sort;return t===a||i(a,t)&&e===a.sort?r:e}},72858:function(t,e,n){var i=n(62856);t.exports=i},34342:function(t,e,n){var i=n(2861).match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},81046:function(t,e,n){var i=n(2861);t.exports=/MSIE|Trident/.test(i)},18938:function(t,e,n){var i=n(2861).match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},4115:function(t,e,n){"use strict";var i=n(76887),r=n(95329),a=n(24883),o=n(89678),l=n(10623),s=n(85803),c=n(95981),u=n(61388),p=n(34194),h=n(34342),d=n(81046),f=n(53385),v=n(18938),m=[],_=r(m.sort),E=r(m.push),g=c((function(){m.sort(void 0)})),b=c((function(){m.sort(null)})),y=p("sort"),w=!c((function(){if(f)return f<70;if(!(h&&h>3)){if(d)return!0;if(v)return v<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)m.push({k:e+i,v:n})}for(m.sort((function(t,e){return e.v-t.v})),i=0;i<m.length;i++)e=m[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:g||!b||!y||!w},{sort:function(t){void 0!==t&&a(t);var e=o(this);if(w)return void 0===t?_(e):_(e,t);var n,i,r=[],c=l(e);for(i=0;i<c;i++)i in e&&E(r,e[i]);for(u(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:s(e)>s(n)?1:-1}}(t)),n=r.length,i=0;i<n;)e[i]=r[i++];for(;i<c;)delete e[i++];return e}})},62856:function(t,e,n){var i=n(69355);t.exports=i}},function(t){return t.O(0,[321,160,712],(function(){return e=25202,t(t.s=e);var e})),t.O()}])}));