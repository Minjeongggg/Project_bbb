/*! @kyobobook/kbb-js v1.0.10 (build 20231201-105226) */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-collect-sentence"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_name_=self.webpackChunk_KbbJS_name_||[]).push([[660],{47648:function(t,e,n){t.exports=n(72858)},30254:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Ut}});var i=n(13535),a=n.n(i),s=n(68420),o=n(27344),l=n(90306),r=n(3020),c=n(3362),p=n(68345),d=n(82324),u=n(13792),h=n(5281),_=n(12088),m=n.n(_),f=n(47648),g=n.n(f),b=n(49573),v=n.n(b),k=n(98882),w=n.n(k),y=n(50047),C=n.n(y),x=n(53592),L=n.n(x),D=n(96526),E=n(88066),M=n.n(E);function S(t){var e=this.ua.isMobile;$(".killing_part_contents").length>0&&$(".killing_part_contents").remove();var n=O.call(this,"next"),i=O.call(this,"prev"),a=(0,D.ut)("swiper-wrapper","ul").append(t),s=(0,D.ut)("swiper-container").append(a),o=e?s:[s,n,i];return(0,D.ut)("killing_part_contents killing_part_swiper ".concat(e&&"best"===this.type?"has_title":"")).append(o)}function O(t){var e="next"===t?"다음":"이전";return(0,D.ut)({class:"swiper-button-".concat(t)},"button").append((0,D.ut)({class:"hidden",text:e},"span"))}function N(){var t;null!==(t=this.listComp)&&void 0!==t&&t.renderItems.length&&this.listComp.renderItems.forEach((function(t){w()(t).call(t,".custom_scroll_wrap").length&&new SimpleBar(w()(t).call(t,".custom_scroll_wrap")[0]).recalculate()}))}function T(){var t;this.swiper=CustomSwiper(".killing_part_swiper .swiper-container",{slidesPerView:"auto",loop:w()(t=$(".killing_part_swiper .swiper-container")).call(t,".swiper-slide").length>1,speed:500,observer:!0,observeParents:!0,navigation:{nextEl:".killing_part_swiper .swiper-button-next",prevEl:".killing_part_swiper .swiper-button-prev"}})}function R(){var t=this.data.totalCount||0;if(this.ua.isMobile&&(!0===this.getOption("tooltip")||"true"===this.getOption("tooltip"))){var e,n=(0,D.ut)({class:"btn_tooltip","data-role":"btn-dialog","data-target":"#killingPartTooltip"},"button").append([(0,D.ut)("ico_info","span"),(0,D.ut)({class:"hidden",text:"상세내용 열기"},"span")]);return M()(e="문장수집 (".concat((0,D.x6)(t),")")).call(e,n[0].outerHTML)}return"문장수집 (".concat((0,D.x6)(t),")")}function A(){var t,e,n=this,i=w()(t=this.$root).call(t,".btn_tooltip");if(null!==i){var a=(0,D.ut)({id:i.attr("data-target").replace(/^#/,""),class:"dialog_wrap","data-class":"dialog_tooltip"}),s=(0,D.ut)({class:"btn_dialog_close"},"button").append(C()(e=[{class:"ico_dialog_close"},{class:"hidden",text:"닫기"}]).call(e,(function(t){return(0,D.ut)(t)}),"span"));s.on("click",(function(t){n.tipActive=!1}));var o=(0,D.ut)("dialog_header").append((0,D.ut)({class:"dialog_title",text:"문장수집 안내"})),l=(0,D.ut)("dialog_contents").append([(0,D.ut)({class:"tooltip_desc",text:'문장수집은 고객님들이 직접 선정한 책의\n      좋은 문장을 보여주는 교보문고의 새로운 서비스입니다. 마음을 두드린 문장들을 기록하고 좋은 글귀들은 "좋아요"하여 모아보세요.\n      도서 문장과 무관한 내용 등록 시 별도 통보 없이 삭제될 수 있습니다.'}),(0,D.ut)({class:"tooltip_sub_title",text:"리워드 안내"}),(0,D.ut)({class:"tooltip_desc",text:"구매 후 90일 이내에 문장수집 작성 시 e교환권 100원을 적립해 드립니다.\n    e교환권은 적립일로부터 180일 동안\n    사용 가능합니다.\n    리워드는 작성 후 다음 날 제공되며,\n    발송 전 작성 시 발송 완료 후 익일 제공됩니다.\n    리워드는 한 상품에 최초 1회만 제공됩니다.\n    주문취소/반품/절판/품절 시 리워드 대상에서\n    제외됩니다."})]);return a.append([s,o,l]),$("body").append(a),a}}var I=n(27484),P=n.n(I),Y=n(89356),K=n.n(Y),Z=n(63263),z=n.n(Z),U=n(58377),B=n.n(U),j=n(13038),F=n.n(j),H=n(71649),W=n(44845),J=n(30699),q=n.n(J),G=n(73273),V="삭제할 상품/콘텐츠를 선택해 주세요.",Q="선택한 상품/콘텐츠를 삭제하시겠습니까?",X="삭제가 완료되었습니다.",tt=n(49837),et=n(44680);function nt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"myr";return t.indexOf(".")<0&&(t="myRoom.nbop.".concat(t)),et.customURL.apply(void 0,[(0,tt.a$)(n,t),e])}function it(t){var e=nt("myRoomNbopDeleteList"),n={method:p.w$.DELETE,body:t};return this.$http(e,n).catch((function(t){}))}function at(t){var e=nt("myRoomNbopDelete"),n={method:p.w$.DELETE,body:t};return this.$http(e,n).catch((function(t){}))}function st(t,e){var n=K()(t);if(z()){var i=z()(t);e&&(i=q()(i).call(i,(function(e){return B()(t,e).enumerable}))),n.push.apply(n,i)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){(0,W.Z)(t,e,n[e])})):F()?Object.defineProperties(t,F()(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,B()(n,e))}))}return t}function lt(){p.q$||rt.call(this),ct.call(this,this.type),pt.call(this,this.type),p.q$&&ut.call(this)}function rt(){var t=this,e="wish"===t.type;e&&(this.$allCheck=$('input[id="chkSelectChk-sentence"]')),this.$allCheck.off("change").on("change",(function(){var n=$(this,t.$root).prop("checked");(e?$('input[name="wish-sentence"]'):t.$checkList).prop("checked",n);var i=[];if(n){var a=t.itemList||t.data.sentenceList;i=C()(a).call(a,(function(t){return(0,u.ei)(t,["myrmDvsnCode","nbopDvsnCode","nbopTrgtCttsIdnfNum","saleCmdtid"])}))}t.checkedList=i}))}function ct(t){var e,n=this,i=this,a=w()(e=this.$root).call(e,"[data-wish-add-".concat(t,"]")),s="product"===t?"상품을":"콘텐츠를";a.off("click").on("click",(function(t){if(!i.checkedList.length)return i.ui.alert({title:"마이 리스트에 담을 ".concat(s," 선택해주세요")});var e=i.checkedList,a=C()(e).call(e,(function(t){return void 0!==t.saleCmdtid&&null!==t.saleCmdtid||(t.saleCmdtid=t.nbopTrgtCttsIdnfNum),ot(ot({},t),{},{title:$('[data-id="'.concat(t.nbopTrgtCttsIdnfNum,'"] .prod_name')).text()})}));a.forEach((function(t){return t.nbopTrgtCttsIdnfNum=t.saleCmdtid,t})),a=a,n.uber.listCopyPop.active=!0,n.uber.listCopyPop.status=!0,n.uber.listCopyPop.saveList=a}))}function pt(t){var e,n=this,i=this;w()(e=this.$root).call(e,"[data-wish-delete]").off("click").on("click",(function(e){if(0===i.checkedList.length)return i.ui.alert({title:V});i.ui.alert({title:Q,cancel:!0}).then((function(e){if(!e.value)return i.$checkList.prop("checked",!1),void(i.checkedList=[]);var a=i.checkedList;it.call(n,a).then((function(e){return"000000"===e.resultCode&&(i.ui.alert({title:X}),"wish"===t?i.emit("get-data",{params:{page:1}}):i.reset())}))}))}))}function dt(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nbopTrgtCttsIdnfNum",i=this,a="wish"===i.type;w()(t).call(t,".btn_my_delete").on("click",(function(t){var s,o="".concat($(t.target).closest(a?"li":".prod_item").data("id")),l=q()(s=i.itemList).call(s,(function(t){return t[n]===o}))[0],r={myrmDvsnCode:l.myrmDvsnCode,nbopDvsnCode:l.nbopDvsnCode,nbopTrgtCttsIdnfNum:l.nbopTrgtCttsIdnfNum};at.call(e,r).then((function(t){if("000000"===t.resultCode)return a?i.emit("get-data",{params:{page:1}}):i.reset()}))}))}function ut(){var t,e,n=this,i=this,a=this.$list,s="wish"===i.type?"sentence":this.type;r.call(i,!1);var o=w()(t=this.$root).call(t,"[data-wish-edit]"),l=w()(e=this.$root).call(e,"[data-wish-cancel]");o.on("click",(function(t){i.edit=!0;var e=$(t.target).closest(".tab_content");r.call(i,!0,e)})),l.on("click",(function(t){i.edit=!1;var e=$(t.target).closest(".tab_content");r.call(i,!1,e),"wish"!==i.type&&n.$checkList.prop("checked",!1),i.checkedList=[]}));function r(t,e){var n,o;this.editMode=t,t?($("[data-wish-controlbox]",e).show(),$("[data-wish-cancel]",e).show(),$(".killing_part_list",e).addClass("view_list_edit"),$("[data-wish-listsort]",e).length||$(".list_result_wrap",e).after((o=['<span class="form_chk">','<input id="chkSelectChk-'.concat(s,'" type="checkbox" />'),'<label for="chkSelectChk-'.concat(s,'">'),'<span class="val" data-count-select>0</span> / '.concat(i.totalCount||(null===(n=i.itemList)||void 0===n?void 0:n.length)||0),"</label></span>"].join(""),(0,G.createEl)("list_sort_wrap type_full").attr("data-wish-listsort","").append(o))),rt.call(i),$(".no_label",a).css("display","inline-block"),$("[data-wish-edit]",e).hide(),$(".result_count",e).hide(),$(".btn_my_delete",a).hide(),$(".tab_list_wrap").hide(),$(".info_text_box",e).hide(),$(".prod_info, .prod_link",a).each((function(t){$(this).removeAttr("href")})),$(".prod_row_list.type_box",e).addClass("view_list_edit")):($("[data-wish-controlbox]",e).hide(),$("[data-wish-cancel]",e).hide(),$("[data-wish-listsort]").remove(),$(".no_label",a).hide(),$("[data-wish-edit]",e).show(),$(".result_count",e).show(),$(".btn_my_delete",a).show(),$(".tab_list_wrap").show(),$(".info_text_box",e).show(),$(".killing_part_list",e).removeClass("view_list_edit"),$(".prod_row_list.type_box",e).removeClass("view_list_edit"))}}function ht(t,e){var n=this,i=e||n.type,a=function(t){if("writer"===t)return"chrcCode";return"nbopTrgtCttsIdnfNum"}(i);this.isMobile&&this.edit&&$(".btn_my_delete",t).hide(),w()(t).call(t,'input[name="wish-'.concat(i,'"]')).on("change",(function(t){var e=$(t.target).prop("checked"),i=$(t.target)[0].id.split("-")[2],s=n.itemList,o=q()(s).call(s,(function(t){return t[a]===i}))[0],l=o.myrmDvsnCode,r=o.nbopDvsnCode,c=o.nbopTrgtCttsIdnfNum,p=o.saleCmdtid,d={myrmDvsnCode:l,nbopDvsnCode:r,nbopTrgtCttsIdnfNum:c,saleCmdtid:p};if(e){var u;n.checkedList=M()(u=[]).call(u,(0,H.Z)(n.checkedList),[d])}else{var h,_=q()(h=n.checkedList).call(h,(function(t){return t.nbopTrgtCttsIdnfNum!==c}));n.checkedList=_}!function(t){n.$allCheck.prop("checked",t)}(s.length===n.checkedList.length)}))}var _t={my:"my",Detail:"detail",list:"list",best:"best",swiper:"swiper",wish:"wish",prod:"prod"},mt=n(51614),ft=n.n(mt),gt=n(69798),bt=n.n(gt),vt=n(51956),kt=n(61120),wt=n.n(kt),yt=n(1189),Ct=n.n(yt);function $t(){var t,e,n,i=this.options.elements,a=i.swiper,s=i.noData,o=w()(t=this.$root).call(t,a).length>0,l=w()(e=this.$root).call(e,s).length>0;o&&w()(n=this.$root).call(n,a).remove();if(l){var r,c,p;if(this.type===_t.my)return void w()(r=this.$root).call(r,s).hide();if(this.type===_t.Detail)w()(c=$("#sentence")).call(c,s).hide(),$("#sentence .title_wrap").hide();else w()(p=this.$root).call(p,s).remove()}}function xt(){switch(this.type){case _t.swiper:Lt.call(this);break;case _t.list:case _t.my:case _t.wish:case _t.Detail:Et.call(this);break;case _t.best:this.isMobile?Lt.call(this):Et.call(this);break;case _t.prod:this.isMobile?Dt.call(this):Et.call(this)}}function Lt(){var t,e=this,n=this.data,i=n.sentenceList,a=n.wishList,s=C()(i).call(i,(function(t,n){var i=Rt.call(e,t,a[n],n);return e._items.push(i),i}));(this._$el=S.call(this,Ct()(s).call(s)),this.type===_t.swiper)?(this.getElement("title").html(R.call(this)),this.$root.append(this._$el)):w()(t=this.$root).call(t,".contents_inner").append(this._$el);setTimeout((function(){T.call(e),e.commonLoadFun()}))}function Dt(){var t=this;this.getElement("title").html(R.call(this)),this.listComp.data=this.data,setTimeout((function(){var e,n=O.call(t,"next"),i=O.call(t,"prev");n.on("click",(function(e){t.listComp.pagi.next()})),i.on("click",(function(e){t.listComp.pagi.prev()})),$(".killing_part_contents").append([n,i]),t._$el=w()(e=t.$root).call(e,".killing_part_contents .killing_part_item"),t.commonLoadFun()}))}function Et(){var t,e=this;this.type!==_t.list&&this.type!==_t.my||this.getElement("title").text(M()(t="".concat(this.type===_t.my?"작성한":""," 문장수집 (")).call(t,(0,vt.numberWithCommas)(this.data.totalCount),")"));if(this.type===_t.prod&&this.getElement("title").html(R.call(this)),this.type===_t.Detail){var n,i,a,s;$("#sentence .title_wrap").show(),$("#sentence .title_heading").text("나의 문장수집 (".concat((0,vt.numberWithCommas)(this.data.totalCount),")"));var o=(0,vt.createEl)({class:"right_area"},"div"),l={type:"button",class:"".concat(this.isMobile?"btn_xxs":"btn_sm"," btn_primary"),"data-role":"btn-dialog","data-kbbfn":"ui-pop-collect-sentence",html:'<span class="ico_review"></span>문장수집 작성</span>'},r=(null===(n=this.data)||void 0===n?void 0:n.sentenceList)||[];if(r.length>0){var c=r[0];m()(l,{"data-kbbfn-title":c.cmdtName,"data-kbbfn-bid":c.cmdtcode,"data-kbbfn-pid":c.saleCmdtid,"data-kbbfn-dvsnCode":c.saleCmdtDvsnCode,"data-kbbfn-type":"present","data-target":"#popKillingPartAdd"})}var p,d=(0,vt.createEl)(l,"button"),u=(0,vt.createEl)(m()(l,{"data-kbbfn-type":"integrated","data-target":"#popKillingPartNoAdd"}),"button");if(0===w()(i=$("#sentence .title_wrap")).call(i,".right_area").length)w()(p=$("#sentence")).call(p,".title_wrap").append(o.append(d));this.setElement("nodata.btn",u),this.loadScript([this.getElement("nodata.btn")]),this.loadScript([d]);var h,_,f=w()(a=this.$root).call(a,".killing_part_list"),g=w()(s=this.$root).call(s,".no_data");if(!f.length)w()(h=this.$root).call(h,'[data-el="collectList"]')[this.isMobile?"append":"after"]((0,vt.createEl)("killing_part_list my").append((0,vt.createEl)({},"ul"))),this.listComp.setElement("root",w()(_=this.$root).call(_,this.getOption("elements.list")));g.length&&g.hide()}if(this.isMobile&&this.type===_t.wish&&this.getElement("title").html('<span class="fc_green">'.concat((0,vt.numberWithCommas)(this.data.totalCount),"</span>건")),this.isMobile||this.type===_t.my||this.type===_t.Detail){if(this.type===_t.my){var b,v,k,y,C,x=w()(b=this.$root).call(b,".killing_part_list"),L=w()(v=this.$root).call(v,".no_data");if(!x.length)(this.isMobile?w()(k=this.$root).call(k,".contents_inner"):w()(y=this.$root).call(y,".list_result_wrap"))[this.isMobile?"append":"after"]((0,vt.createEl)("killing_part_list my").append((0,vt.createEl)({},"ul"))),this.listComp.setElement("root",w()(C=this.$root).call(C,this.getOption("elements.list")));L.length&&L.hide()}1===this.page?this.listComp.data=this.data:this.listComp.append(this.data);var D=this.items;D.length===this.per&&(this._obTarget=D[D.length-4][0],setTimeout((function(){e.observer.observe(e.obTarget)}),500))}else this.listComp.data=this.data;setTimeout((function(){var t,n;e.type===_t.prod?e._$el=w()(t=e.$root).call(t,".killing_part_contents .killing_part_item"):e._$el=w()(n=e.$root).call(n,"ul .killing_part_contents");e.commonLoadFun()}))}function Mt(){if(this.type===_t.swiper||this.type===_t.prod){this.getElement("title").html(R.call(this));var t=(0,vt.createEl)("killing_part_contents killing_part_swiper");t.css("display","none"),this.$root.append([t,this.$noData])}if(this.type===_t.my||this.type===_t.Detail){var e,n,i=w()(e=this.$root).call(e,".killing_part_list"),a=w()(n=this.$root).call(n,".no_data");if(i.length&&i.remove(),a.length)return void a.show();var s=(0,vt.createEl)("no_data".concat(this.isMobile?" has_bottom_line":"")),o=(0,vt.createEl)("btn_wrap"),l=$('<button class="btn_sm btn_line_gray" data-role="btn-dialog" data-kbbfn-type="integrated" data-target="#popKillingPart" data-kbbfn="ui-pop-collect-sentence"><span class="text">문장수집 작성</span></button>');this.type===_t.Detail&&($("#sentence .title_wrap").hide(),l=(0,vt.createEl)({type:"button",class:"".concat(this.isMobile?"btn_xs":"btn_sm"," btn_line_gray"),"data-role":"btn-dialog","data-kbbfn":"ui-pop-collect-sentence","data-kbbfn-title":this.getOption("ptit"),"data-kbbfn-bid":this.getOption("bid"),"data-kbbfn-pid":this.getOption("pid"),"data-kbbfn-dvsnCode":this.getOption("dvsn"),"data-target":"#popKillingPart",html:'<span class="text">문장수집 작성</span>'},"button")),s.append(['<div class="no_data_desc">문장수집을 작성해 보세요.</div>',o.append(l)]),this.setElement("nodata.btn",l),this.$root.append(s)}if(this.type===_t.wish){var r,c,p=w()(r=this.$root).call(r,".killing_part_list"),d=w()(c=this.$root).call(c,".no_data");p.length&&p.remove(),d.length&&d.remove();var u=(0,vt.createEl)("no_data".concat(this.isMobile?"":" has_bottom_line"));u.append('<div class="no_data_desc">찜한 문장수집이 없습니다.</div>'),this.$root.append(u)}}function St(){var t=this;this.on("collect-load-data",(function(e){var n=e.sentenceList;$t.call(t),null===n||0===n.length?(t.type!==_t.swiper&&t.type!==_t.wish&&t.type!==_t.prod||Mt.call(t),t.type!==_t.my&&t.type!==_t.Detail||(Mt.call(t),setTimeout((function(){t.loadScript([t.getElement("nodata.btn")])})))):xt.call(t)})),this.on("get-data",(function(e){var n=e.params;t.type,_t.my,t._getData(n)}))}function Ot(){var t,e,n=this;null!==this._$el&&(w()(t=this._$el).call(t,".btn_killing_part_down").off("click").on("click",(function(t){var e,i;ft()(e=window.location.host).call(e,"product")&&ft()(i=window.location.pathname).call(i,"/detail")&&window.ga360.GA_Event(n.isMobile?"click_종이책_상품상세_MO":"click_종이책_상품상세_PC","상세탭_리뷰","문장수집","다운로드","");var a=$(t.target).closest("button").closest("li, div.killing_part_item").data("id"),s=$(t.target).closest(".killing_part_bg").clone();(s.css({position:"absolute",left:"-4000px",top:"-4000px"}),s.addClass("download"),$(t.target).closest(".killing_part_contents").append(s),n.isMobile)||new SimpleBar(w()(s).call(s,".custom_scroll_wrap")[0]).recalculate();setTimeout((function(){wt()(s.get(0),{useCORS:!0,width:640,height:640,logging:!0}).then((function(t){var e;(e=t.toDataURL(),new(bt())((function(t){var n=new window.Image;n.src=e,n.onload=function(){var e=document.createElement("canvas"),i=640,a=640;e.width=i,e.height=a,e.getContext("2d").drawImage(n,0,0,i,a),t(e)}}))).then((function(t){if(t.msToBlob){var e=t.msToBlob();window.navigator.msSaveBlob(e,"".concat(a,".jpg"))}else n=t.toDataURL(),i="".concat(a,".jpg"),(s=document.createElement("a")).download=i,s.href=n,document.body.appendChild(s),s.click(),s.remove();var n,i,s})).then((function(){s.remove(),n.ui.alert({code:"AL_05_0034"})}))}))}),500)})),w()(e=this.getElement("title")).call(e,".btn_tooltip").on("click",(function(t){n.tipActive=!0})))}function Nt(t){var e=this,n="/api".concat((0,vt.getGlobalOption)("api.urls.common.sentence.remove"));return this.$http(this.getSearchURL({revwNum:t},n),{method:"DELETE"}).then((function(t){e.page=1,e._getData({page:1})}))}function Tt(t){var e=t.revwNum,n=t.revwCntt,i=t.exttPageNum,a=t.saleCmdtid,s=t.cmdtName,o=t.imgPath,l=t.saleCmdtDvsnCode,r=t.saleLmttAge,c=t.cmdtCode;if(this.popSentence){var p=this.popSentence.list,d=w()(p).call(p,(function(t){return"modify"===t.event}));null!=d&&(d.revwNum=e,d.collect=n,d.page=i,d.pid=a,d.product={cmdtName:s,saleCmdtid:a,imgPath:o,dvsnCode:l,cmdtCode:c,saleLmttAge:r},d.active=!0)}}function Rt(t,e,n){var i,a,s,o,l,r,c=this,p=this.ua.isMobile,d=t.revwNum,u=t.chrcName,h=t.revwCntt,_=t.exttPageNum,m=t.cretDttm,f=t.cmdtName,g=t.nbopTrgtCttsIdnfNum,b=t.mmbrId,v=t.revwCretDttm,k=t.chrcCode,y=t.saleCmdtDvsnCode,x=t.saleLmttAge,L=t.saleCmdtid;L=this.type===_t.best?t.saleCmdtId:L;var E=1,S=this.type;(n+1)%2==0&&(E=2);var O=(0,D.kR)({pid:L,bid:t.cmdtcode,type:y}),N=(0,D.ut)("title_wrap ".concat(this.isMobile?"title_size_def":"title_size_sm")).append((0,D.ut)("title_heading","p").append((0,D.ut)({href:O,text:f},"a"))),T=(0,D.ut)("review_user_info").append([null!=b?'<span class="user_name">'.concat(b,"</span>"):null,'<span class="gap"> | </span>','<span class="date">'.concat(m?P()(m).format("YYYY.MM.DD"):P()(v).format("YYYY.MM.DD"),"</span>")]),R=["수정","삭제"];_t.wish===S&&(R=[]);var A,I=(0,D.LM)({pid:t.saleCmdtid,bid:t.cmdtcode,type:t.saleCmdtDvsnCode,adult:t.saleLmttAge,size:"100x0"}),Y=(0,D.ut)("prod_thumb_box size_min").append([(0,D.ut)({href:O,class:"prod_link"},"a").append((0,D.ut)("img_box","span").append(I))]),K=M()([]).apply([],C()(R).call(R,(function(e,n){var i=(0,D.ut)({type:"button",class:"btn_text_link",html:'<span class="text">'.concat(e,"</span>"),"data-kbbfn-event":"수정"===e?"modify":null,"data-kbbfn":"수정"===e?"ui-pop-collect-sentence":null,"data-target":"수정"===e?"#popKillingPartEdit":null},"button").on("click",(function(n){"수정"!==e?c.ui.alert({code:"AL_05_0027"}).then((function(t){t.value&&Nt.call(c,d)})):Tt.call(c,{revwNum:d,revwCntt:h,exttPageNum:_,saleCmdtid:L,cmdtName:f,cmdtCode:t.cmdtcode,saleLmttAge:x,imgPath:w()(Y).call(Y,'[data-kbbfn="s3-image"]').attr("src"),saleCmdtDvsnCode:y})}));return R.length>1&&0===n?[i,'<span class="gap"></span>']:[i]}))),Z=(0,D.ut)("library_info_box").append([M()(i='<span class="left_area">'.concat(S===_t.wish?"".concat(null!=b?'<span class="user_name">'.concat(b,'</span><span class="gap"> | </span>'):""):null,'<span class="date">')).call(i,P()(m).format("YYYY.MM.DD"),"</span></span>"),(0,D.ut)("right_area").append(K)]),z=(0,D.ut)("prod_info_box").append([f?(0,D.ut)({href:O,class:"prod_info",html:'<span class="prod_name ellipsis_single">'.concat(f,"</span>")},"a"):null,u?(0,D.ut)({href:null!=k?(0,D.$u)("/ONK/service/profile/information?chrcCode=".concat(k)):null,class:"prod_author_link",html:'<span class="prod_author">'.concat(u,"</span>")},"a"):null]),U=(0,D.ut)("prod_info_type_tag_box").append((0,D.ut)("prod_area horizontal").append([Y,z])),B=this.isMobile?"/mok/bg_killing_part_0".concat(E,"_mok@2x.png"):"/ink/bg_killing_part_0".concat(E,"@2x.png"),j=this.isMobile?"/mok/img_killing_part_logo_mok@2x.png":"/ink/img_killing_part_logo@2x.png",F=M()(a=M()(s=M()(o=M()(l=M()(r='\n    <div class="killing_part_bg killing_part_bg0'.concat(E,'" style="background-image: url(\'/cdn/img?path=/images/common')).call(r,B,'\')">\n      <div class="slide_inner_top">\n      ')).call(l,S===_t.wish?"":"".concat((0,D.ut)({class:"btn_like".concat("Y"===e.nbopYson?" active":""),"data-kbbfn":"wish-item","data-kbbfn-id":d,"data-kbbfn-myrcode":"001","data-kbbfn-nbopcode":"003"},"button").append((0,D.ut)("ico_like","span"))[0].outerHTML),"\n        ")).call(o,(A=(0,D.ut)({id:"prodKillingPartShareBtn",class:"sns_share_wrap size_sm","data-kbbfn":"ui-sns-share","data-target":"#popShare","data-kbbfn-url":O,"data-kbbfn-title":f}),p&&(A=(0,D.ut)({id:"prodKillingPartShareBtn",class:"btn_share size_sm","data-target":"#popShare","data-kbbfn":"ui-sns-share","data-kbbfn-url":O,"data-kbbfn-title":f},"button").append([(0,D.ut)("ico_share","span"),(0,D.ut)("hidden","span")])),A[0].outerHTML),'\n      </div>\n      <div class="slide_inner_middle">\n       ')).call(s,function(){var t="";""!==_&&0!==Number(_)&&(t=(0,D.ut)("from_page").text("p.".concat(_," 에서")));var e=(0,D.ut)("text_killing_part").safeHtml(h);p||(e=(0,D.ut)("custom_scroll_wrap type_white").append(e));var n=(0,D.ut)("prod_name").text(f);return(0,D.ut)("slide_inner_middle").append([e,n,t]).html()}(),'\n      </div>\n      <div class="btn_wrap">\n        <button type="button" class="btn_xs btn_killing_part_down">\n          <span class="text">다운로드</span>\n        </button>\n      </div>\n      <span class="logo" style="background-image: url(\'/cdn/img?path=/images/common')).call(a,j,"')\">교보문고</span>\n    </div>\n    "),H=null,W={},J="li";switch(S){case _t.swiper:W="swiper-slide",H=[F,T];break;case _t.prod:W="killing_part_item",J="div",H=[F,T];break;case _t.list:var q=(0,D.ut)("killing_part_contents has_title");H=this.isMobile?(0,D.ut)("killing_part_wrap").append(q.append([F,T,N])):q.append([F,T,N]);break;case _t.best:if(this.isMobile){W="swiper-slide",H=[F,T,N];break}var G=(0,D.ut)("killing_part_contents");H=[At.call(this,t),G.append(F,T)];break;case _t.my:var V=(0,D.ut)("killing_part_contents has_title");H=this.isMobile?(0,D.ut)("killing_part_wrap").append(V.append([F,Z,U])):V.append([F,Z,U]);break;case _t.Detail:var Q=(0,D.ut)("killing_part_contents has_title");H=this.isMobile?(0,D.ut)("killing_part_wrap").append(Q.append([F,Z])):Q.append([F,Z]);break;case _t.wish:var X=(0,D.ut)("killing_part_contents has_title");H=this.isMobile?(0,D.ut)("killing_part_wrap").append(X.append([F,Z,U])):X.append([F,Z,U])}var tt=(0,D.ut)(W,J);if(tt.data("id",d),null!=H){var et,nt;if(S===_t.wish)tt.append((0,D.ut)("killing_part_top").append([(0,D.ut)("form_chk no_label","span").append([M()(et='<input id="wish-sentence-'.concat(g,"-")).call(et,n,'" name="wish-sentence" type="checkbox"/>'),M()(nt='<label for="wish-sentence-'.concat(g,"-")).call(nt,n,'"><span class="hidden">선택</span></label>')]),(0,D.ut)("btn_my_delete","button").append('<span class="hidden">삭제</span>')])),ht.call(this,$(tt),"sentence");return tt.attr("data-id",g),tt.append(H),dt.call(this,tt),tt}return tt.append(F)}function At(t,e){var n=this,i=t.saleCmdtId,a=t.cmdtcode,s=t.saleCmdtDvsnCode,o=t.saleLmttAge,l=(0,D.ut)("prod_area horizontal"),r=(0,D.LM)({pid:i,bid:a,type:s,adult:o,size:"auto-fit"}),c=(0,D.ut)("prod_thumb_box size_lg").append([(0,D.ut)({href:(0,D.kR)({pid:i,type:s}),class:"prod_link"},"a").append((0,D.ut)("img_box","span").append(r)),(0,D.ut)("prod_viewer_control").append([(0,D.ut)({href:(0,D.kR)({pid:i,type:s}),class:"btn_prod_viewer",target:"_blank",html:'<span class="ico_blank"></span><span class="text">새창보기</span>'},"a").on("click",(function(t){t.preventDefault(),t.stopPropagation(),n.ua.isMobileApp?window.location.href=(0,D.kR)({pid:i,type:s}):window.open((0,D.kR)({pid:i,type:s}))}))])]);return l.append([c,It.call(this,t,e)])}function It(t,e){var n,i,a,s=t.cmdtName,o=t.chrcName,l=t.cmdtcode,r=t.pbcmName,c=t.revwRvgrAvg,p=t.bestEmtnKywrName,d=t.saleCmdtId,u=t.anntCntt,h=t.saleCmdtDvsnCode,_=t.saleCmdtClstName,m=(0,D.ut)("prod_info_box"),f=(0,D.kR)({pid:d,bid:l,type:h}),g=(0,D.ut)({href:f,class:"prod_info",html:M()(n='<span class="prod_name">'.concat(null!=_?"[".concat(_,"] "):"")).call(n,s,"</span>")},"a"),b=(0,D.ut)("prod_author","span").append((0,D.ut)({href:f,html:M()(i=M()(a="".concat(o?"".concat(o," · "):""," ")).call(a,r?"".concat(r," "):""," ")).call(i,null!=t&&t.date?'<span class="date">· '.concat(null==t?void 0:t.date,"</span>"):"")},"a")),v=(0,D.ut)("prod_price").append([]),k=(0,D.ut)("prod_bottom").append([(0,D.ut)("review_summary_wrap type_sm").append([(0,D.ut)("review_klover_box","span").append([(0,D.ut)({class:"review_klover_text font_size_xxs",text:0===c?"0.0":c},"span")]),p?(0,D.ut)({class:"gap",text:"/"},"span"):null,p?(0,D.ut)({class:"review_quotes_text font_size_xxs",text:p},"span"):null])]).on("click",(function(t){window.location.href="".concat(f,"/#scrollSpyProdReview")})),w=(0,D.ut)("prod_introduction","P").safeHtml(u);return m.append([g,b,v,w,k])}var Pt=n(56801);function Yt(t){var e=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var s=(0,c.Z)(this).constructor;n=a()(i,arguments,s)}else n=i.apply(this,arguments);return(0,r.Z)(this,n)}}var Kt=function(t){(0,l.Z)(n,t);var e=Yt(n);function n(t,i){var a;return(0,s.Z)(this,n),(a=e.call(this,t,null,i))._data=null,a._$swiperEl=null,a._pid=a.getOption("pid"),a._type=a.getOption("type"),a._per=a.getOption("per"),a._sort=a.getOption("sort"),a._page=1,a._obTarget=null,a._observer=null,a._items=[],a._checkedList=[],St.call((0,h.Z)(a)),a.initOptions(),a.domReady(),a}return(0,o.Z)(n,[{key:"initOptions",value:function(){m()(this.options,{elements:{root:this.getOption("root"),list:this.getOption("list"),popup:this.getOption("popup"),swiper:this.getOption("swiper"),noData:".no_data",title:this.getOption("title")||".title_heading",ink:{button:{history:".right_area .btn_line_gray",open:'.right_area [data-kbbfn="ui-pop-collect-sentence"]'}},mok:{button:{history:".btn_wrap .btn_line_gray",open:'.btn_wrap [data-kbbfn="ui-pop-collect-sentence"]'}}}})}},{key:"$noData",get:function(){return(0,D.ut)({class:"no_data type_gray size_sm"}).append((0,D.ut)({class:"no_data_desc",text:"이 책의 첫 기록을 남겨주세요."}))}},{key:"checkedList",get:function(){return this._checkedList},set:function(t){this._checkedList=t,$("[data-count-select]",this.$root).text(t.length),$(".result_count .fc_green",this.$root).text(t.length)}},{key:"data",get:function(){return this._data},set:function(t){var e=t.sentenceList;this._data=t,this.emit("collect-load-data",{sentenceList:e})}},{key:"reviewable",get:function(){return"N"!==this.data.reviewWrite}},{key:"tipActive",get:function(){return this._tipActive},set:function(t){this.tip[t?"open":"close"]()}},{key:"tip",get:function(){return this._tipDialog}},{key:"items",get:function(){return this._items}},{key:"observer",get:function(){return this._observer}},{key:"obTarget",get:function(){return this._obTarget}},{key:"page",get:function(){return this._page},set:function(t){this._page=t,null!=this._topPagi&&(this._topPagi.value=t)}},{key:"pid",get:function(){return this._pid},set:function(t){this._pid=t}},{key:"popSentence",get:function(){return this.modules.get("uiPopCollectSentence")}},{key:"type",get:function(){return this._type}},{key:"per",get:function(){return this._per}},{key:"sort",get:function(){return this._sort}},{key:"$root",get:function(){return $(this.getOption("elements.root"))}},{key:"userModel",get:function(){return this.modules.get("user").model}},{key:"params",get:function(){var t=this,e={revwPatrCode:"000",reviewSort:g()(this)};return[{name:_t.swiper,opt:{pageLimit:6,saleCmdtid:this.pid}},{name:_t.prod,opt:{pageLimit:this.per,saleCmdtid:this.pid}},{name:_t.list,opt:{pageLimit:this.per}},{name:_t.best,opt:{per:this.per}},{name:_t.Detail,opt:{pageLimit:this.per,saleCmdtid:this.pid,mmbrNumSearchYsno:"Y"}},{name:_t.my,opt:{pageLimit:this.per,mmbrNumSearchYsno:"Y"}},{name:_t.wish,opt:{pageLimit:this.per}}].forEach((function(n){var i=n.name,a=n.opt;i===t.type&&m()(e,a)})),e}},{key:"getSearchURL",value:function(t,e){return[e,new(v())(t).toString()].join("?")}},{key:"domReady",value:function(){this._domInit(),this._getData({page:1})}},{key:"setWish",value:function(){this.$allCheck=$('input[id="chkSelectChk-sentence"]'),this.$list=$(".killing_part_list ul");var t=this.data.totalCount;if(this.totalCount=t,this.itemList=this.data.sentenceList,lt.call(this),this.ua.isMobile){$(".result_count .fc_green",this.$root).text(t);var e=$('label[for="chkSelectChk-sentence"]',this.$root);e.text("/".concat(t)),e.prepend('<span class="val" data-count-select>0</span>')}else{var n=$(".list_result_wrap .check_count",this.$root);n.text("/".concat(t)),n.prepend('<span class="fw_bold" data-count-select>0</span>')}}},{key:"_domInit",value:function(){var t,e,n,i,a=this,s=this.$root,o=this.options.elements,l=this.ua.isMobile;this.type!==_t.my&&w()(s).call(s,null==o||null===(n=o[this.viewDIR])||void 0===n||null===(i=n.button)||void 0===i?void 0:i.history).on("click",(function(t){a.loginAlert((function(){window.location.href=(0,D.$u)("/MYR/library/sentences")}))}));if(w()(s).call(s,null==o||null===(t=o[this.viewDIR])||void 0===t||null===(e=t.button)||void 0===e?void 0:e.open).on("click",(function(t){t.preventDefault(),a.loginAlert((function(){$(o.popup).dialog("open")}))})),this.setElement("title",w()(s).call(s,o.title)),l&&this.type===_t.prod&&(!0===this.getOption("tooltip")||"true"===this.getOption("tooltip"))){var r=A.call(this);if(null===r)return;this.ui.dialog("#"+r.attr("id")),setTimeout((function(){a._tipDialog=r.dialog("instance")}))}switch(this.type){case _t.list:case _t.my:case _t.Detail:this.createListComp(),this._observer=new IntersectionObserver((function(t,e){return a.obCallback(t,e)}));break;case _t.best:if(this.isMobile)break;this.createListComp();break;case _t.prod:this.createListComp();break;case _t.wish:this.createListComp(),this._observer=new IntersectionObserver((function(t,e){return a.obCallback(t,e)}))}this.initialized=!0}},{key:"obCallback",value:function(t,e){var n=this;t.forEach((function(t){t.isIntersecting&&(n.loading||(null!==n.obTarget&&e.unobserve(n.obTarget),20*n.page!==n.data.totalCount&&(n.page+=1,n._getData({page:n.page}))))}))}},{key:"createListComp",value:function(){var t,e=this,n={el:w()(t=this.$root).call(t,this.getOption("elements.list")),render:{data:function(t){return e._items=[],t.sentenceList},item:function(t,n){var i=Rt.call(e,t,e.data.wishList[n],n);return e._items.push(i),i}}};if(this.type!==_t.my&&(!this.isMobile||this.type===_t.prod)){var i,a,s=w()(i=this.$root).call(i,".pagination");if(this.type===_t.best)s=w()(a=this.$root).call(a,"#bottom_pagi");n=m()(n,{pagination:{el:s,ready:function(t){if(e.type===_t.best){var n=t.options;n.el=$("#top_pagi"),$("#top_pagi").length&&(e._topPagi=new Pt.Pagination(n),e._topPagi.on("change",(function(t){var n=t.value;t.target;e.listComp.page=n})))}e.listComp.pagi.on("change",(function(t){e.page=t.value,e._getData({page:t.value})}))},mapUpdateData:function(t){return{total:t.totalCount,page:e.page,size:e.per}}}})}this.listComp=new Pt.ListComponent(n)}},{key:"_getData",value:function(t){var e=this;this._page=t.page||1;var n=m()(this.params,t),i="/api".concat((0,D._7)("api.urls.common.sentence.list")),a=this.getSearchURL(n,i);switch(this.type){case _t.wish:a=this.getSearchURL(n,"/api".concat((0,D._7)("api.urls.common.sentence.myWishList")));break;case _t.best:a=this.getSearchURL(n,(0,D._7)("api.urls.common.sentence.bestList"))}this.ui.loading=!0,this.$http(a).then((function(t){var n,i,a=t.data;switch(e.type){case _t.wish:a={sentenceList:a.nbopSentenceList,wishList:C()(n=L()({length:a.nbopSentenceList.length},(function(t,e){return e}))).call(n,(function(){var t,e;return{saleCmdtid:null===(t=a)||void 0===t||null===(e=t.nbopSentenceList[0])||void 0===e?void 0:e.saleCmdtid,nbopYson:"Y"}})),totalCount:a.totalCount};break;case _t.best:a={sentenceList:a.totalReviewList,wishList:C()(i=L()({length:a.totalReviewList.length},(function(t,e){return e}))).call(i,(function(t){return{saleCmdtid:a.totalReviewList[t].saleCmdtId,nbopYson:a.totalReviewList[t].reviewRecommendUserYsno}})),totalCount:a.totalCount}}e.data=a})).catch((function(){e.data={sentenceList:[]}})).finally((function(){e.type===_t.wish&&e.setWish(),e.ui.loading=!1}))}},{key:"loadScript",value:function(t){var e=this;if(t.length>0){if(1===t.length){if(0===t[0].length)return;return void this.ui.loadKbbFn(t[0])}t.each((function(t,n){n.length>0&&e.ui.loadKbbFn(n)}))}}},{key:"commonLoadFun",value:function(){N.call(this),Ot.call(this),this.ui.loadKbbFnAll(this.$root)}},{key:"loginAlert",value:function(t){this.authorized?t():this.ui.loginAlert()}}]),n}(d.ht);function Zt(t){var e=function(){if("undefined"==typeof Reflect||!a())return!1;if(a().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.Z)(t);if(e){var s=(0,c.Z)(this).constructor;n=a()(i,arguments,s)}else n=i.apply(this,arguments);return(0,r.Z)(this,n)}}var zt=function(t){(0,l.Z)(n,t);var e=Zt(n);function n(){var t;return(0,s.Z)(this,n),(t=e.call(this,"collect-sentence",{initList:[p.bn.AUTHORIZE]}))._items=[],t.auth.ready().then((function(){t.emit(p.C9.PARTIAL_INIT,{name:p.bn.AUTHORIZE})})),t.on("get-data",(function(e){var n=e.params;t.items.forEach((function(t){null!=t.getOption("popup")&&t.emit("get-data",{params:n})}))})),t}return(0,o.Z)(n,[{key:"items",get:function(){return this._items}},{key:"create",value:function(t){var e=new Kt(this,t);return this.items.push(e),e}},{key:"isAvailReview",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(0,u.U2)(this.items,t);return null==e||e.reviewable}}]),n}(d.YZ),Ut=new zt},2948:function(t,e,n){n(4115);var i=n(35703);t.exports=i("Array").sort},69355:function(t,e,n){var i=n(7046),a=n(2948),s=Array.prototype;t.exports=function(t){var e=t.sort;return t===s||i(s,t)&&e===s.sort?a:e}},72858:function(t,e,n){var i=n(62856);t.exports=i},34342:function(t,e,n){var i=n(2861).match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},81046:function(t,e,n){var i=n(2861);t.exports=/MSIE|Trident/.test(i)},18938:function(t,e,n){var i=n(2861).match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},4115:function(t,e,n){"use strict";var i=n(76887),a=n(95329),s=n(24883),o=n(89678),l=n(10623),r=n(85803),c=n(95981),p=n(61388),d=n(34194),u=n(34342),h=n(81046),_=n(53385),m=n(18938),f=[],g=a(f.sort),b=a(f.push),v=c((function(){f.sort(void 0)})),k=c((function(){f.sort(null)})),w=d("sort"),y=!c((function(){if(_)return _<70;if(!(u&&u>3)){if(h)return!0;if(m)return m<603;var t,e,n,i,a="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)f.push({k:e+i,v:n})}for(f.sort((function(t,e){return e.v-t.v})),i=0;i<f.length;i++)e=f[i].k.charAt(0),a.charAt(a.length-1)!==e&&(a+=e);return"DGBEFHACIJK"!==a}}));i({target:"Array",proto:!0,forced:v||!k||!w||!y},{sort:function(t){void 0!==t&&s(t);var e=o(this);if(y)return void 0===t?g(e):g(e,t);var n,i,a=[],c=l(e);for(i=0;i<c;i++)i in e&&b(a,e[i]);for(p(a,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:r(e)>r(n)?1:-1}}(t)),n=a.length,i=0;i<n;)e[i]=a[i++];for(;i<c;)delete e[i++];return e}})},62856:function(t,e,n){var i=n(69355);t.exports=i}},function(t){return t.O(0,[321,160,712],(function(){return e=30254,t(t.s=e);var e})),t.O()}])}));