/*! @kyobobook/kbb-js v1.0.10 (build 20231201-105226) */
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.__KbbJS__=e():(t.__KbbJS__=t.__KbbJS__||{},t.__KbbJS__["plugins.ui-sns-share"]=e())}(self,(function(){return(self.webpackChunk_KbbJS_name_=self.webpackChunk_KbbJS_name_||[]).push([[85],{16800:function(t,e,a){a.d(e,{R:function(){return R}});var n=a(13535),s=a.n(n),i=a(68420),r=a(27344),o=a(5281),l=a(90306),c=a(3020),u=a(3362),h=a(88066),p=a.n(h),d=a(69111),f=a(82324),_=a(68345),g=a(96526),k=a(51614),v=a.n(k),m=a(98882),b=a.n(m),y=a(50047),w=a.n(y),x=a(30699),U=a.n(x);function T(){var t,e=this,a=this.getOption("trigger");if(a){var n=$(a).attr("data-target");if($(n).length)return this._dialog=$(n).dialog("instance"),$(n);var s=(0,g.ut)({id:$(a).attr("data-target").replace(/^#/,""),class:"dialog_wrap has_btn","data-class":"dialog_bottom sns_share"}),i=(0,g.ut)({class:"btn_dialog_close","data-dialog-close":""},"button").append(w()(t=[{class:"ico_dialog_close"},{class:"hidden",text:"닫기"}]).call(t,(function(t){return(0,g.ut)(t)}),"span")),r=(0,g.ut)("dialog_header").append((0,g.ut)({class:"dialog_title",text:"공유하기"})),o=A.call(this),l=(0,g.ut)({class:"sns_share_link",text:this.shareUrl},"span");this.setElement("url.span.mok",l);var c=(0,g.ut)("dialog_footer").append((0,g.ut)("sns_share_link_box").append([l,(0,g.ut)({class:"btn_share_link",text:"URL 복사"},"button").on("click",(function(t){var a=document.createElement("input");a.style="position: absolute; left: -1000px; top: -1000px",a.value=l.text(),$(t.target).append(a),a.select(),document.execCommand("copy"),a.remove(),e.ui.toast("URL이 복사되었습니다.")}))]));return s.append([i,r,o,c]),$("body").append(s),s}}function A(){var t=this,e=this.elOpt.elements,a=(0,g.ut)("dialog_contents"),n=[];null==e||e.items.forEach((function(e){(t.ua.isMobileApp||"MSG"!==e.name&&"MORE"!==e.name)&&n.push(e)}));var s=w()(n).call(n,(function(e){var a=[];switch(e.name){case"KAT":a=[{class:"ico_sns kakao"},{class:"sns_text",text:" 카카오톡"}];break;case"KAS":a=[{class:"ico_sns kakako_story"},{class:"sns_text",text:" 카카오스토리"}];break;case"LIN":a=[{class:"ico_sns line"},{class:"sns_text",text:" 라인"}];break;case"NAB":a=[{class:"ico_sns band"},{class:"sns_text",text:" 밴드"}];break;case"FAB":a=[{class:"ico_sns facebook"},{class:"sns_text",text:" 페이스북"}];break;case"TWI":a=[{class:"ico_sns twitter"},{class:"sns_text",text:" 트위터"}];break;case"MSG":a=[{class:"ico_sns message"},{class:"sns_text",text:" 메세지"}];break;case"MORE":a=[{class:"ico_sns more"},{class:"sns_text",text:" 더보기"}]}return(0,g.ut)("list_item","li").append((0,g.ut)({href:"javascript:void(0)",class:"btn_sns_share"},"a").on("click",(function(a){a.preventDefault(),t.shareType=e.name})).append(w()(a).call(a,(function(t){return(0,g.ut)(t)}),"span")))}));return a.append((0,g.ut)("sns_share_list","ul").append(s))}function S(){var t,e=this,a=$(this.getOption("trigger"));if(a.length){var n=this.elOpt.elements,s=(0,g.ut)({type:"button",class:"btn_share",html:'<span class="ico_share"></span><span class="hidden">공유하기</span>'},"button").on("click",(function(t){var a,n;if(v()(a=window.location.host).call(a,"product")&&v()(n=window.location.pathname).call(n,"/detail")){var s=t.currentTarget.parentElement.id;"prodTitleShareBtn"===s&&window.ga360.GA_Event("click_종이책_상품상세_PC","상단","","공유하기",""),"prodPackageShareBtn"===s&&window.ga360.GA_Event("click_종이책_상품상세_PC","상세탭_상품정보","패키지","공유하기",""),"prodBookCardShareBtn"===s&&window.ga360.GA_Event("click_종이책_상품상세_PC","상세탭_상품정보","북카드","공유하기",""),"prodKillingPartShareBtn"===s&&window.ga360.GA_Event("click_종이책_상품상세_PC","상세탭_리뷰","문장수집","공유하기","")}e.snsShareToggle(t,!0)})),i=(0,g.ut)({type:"button",class:"btn_sns_share_close",html:'<i class="ico_share_close"></i><span class="hidden">닫기</span>'},"button").on("click",(function(t){e.snsShareToggle(t,!1)})),r=(0,g.ut)("sns_share_box");null==n||U()(t=n.items).call(t,(function(t){return t.isPc})).forEach((function(t){var a=null,n=(0,g.ut)({href:"javascript:void(0)",class:"btn_sns_share ".concat(t.selector)},"a").on("click",(function(a){a.preventDefault(),e.shareType=t.name,e.snsShareToggle(a,!1)}));switch(t.name){case"KAS":a="공유하기";break;case"NAB":a="밴드 공유하기";break;case"FAB":a="페이스북 공유하기";break;case"TWI":a="트위터 공유하기";break;case"URL":a="url 복사하기"}r.append(n.append((0,g.ut)({class:"hidden",text:a},"span")))})),r.append(i),a.append([s,r])}}function K(){var t=this;if(this.ua.isMobile){if(!this.getOption("trigger"))return;var e=T.call(this).one("dialogcreate",(function(e,a){t._dialog=$(e.target).dialog("instance"),t.initialized=!0}));this.shareDialog=e,this.ui.dialog("#"+e.attr("id"));var a=$('[data-kbbfn="ui-sns-share"]');this.dialog&&a.off("click.getData").on("click.getData",(function(e){var a,n,s=$(e.target).closest("button");v()(a=window.location.host).call(a,"product")&&v()(n=window.location.pathname).call(n,"/detail")&&"prodKillingPartShareBtn"===s[0].id&&window.ga360.GA_Event("click_종이책_상품상세_MO","상세탭_리뷰","문장수집","공유하기",""),t.shareUrl=s.data("kbbfn-url")||window.location.href,P.call(t),t.active=!0}))}else S.call(this)}function P(){var t;this.shareDialog&&b()(t=this.shareDialog).call(t,".sns_share_link").text(this.shareUrl)}function I(t){var e=function(){if("undefined"==typeof Reflect||!s())return!1;if(s().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=(0,u.Z)(t);if(e){var i=(0,u.Z)(this).constructor;a=s()(n,arguments,i)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var O=[_.LH,"mimages/static2/images/common/launcher_icon.png"].join("/"),R=function(t){(0,l.Z)(a,t);var e=I(a);function a(t,n,s){var r;return(0,i.Z)(this,a),(r=e.call(this,t,n,s))._active=!1,r._shareType=null,r._targetWrap=null,r._shareUrl=r.getOption("url",window.location.href),r._shareTitle=(0,d.decode)(r.getOption("title","")),r._imgUrl=r.getOption("img",O),K.call((0,o.Z)(r)),r.on("share-change",(function(t){var e=t.share,a=t.e;r.shareHandle(e,a)})),r}return(0,r.Z)(a,[{key:"elOpt",get:function(){return{elements:{root:".sns_share_wrap",items:[{name:"KAT",selector:"kakao_talk",isPc:!0},{name:"KAS",selector:"kakao",isPc:!0},{name:"LIN",selector:"naver_line",isPc:!0},{name:"NAB",selector:"band",isPc:!0},{name:"FAB",selector:"facebook",isPc:!0},{name:"TWI",selector:"twitter",isPc:!0},{name:"MSG",selector:"message",isPc:!1},{name:"MORE",selector:"more",isPc:!1},{name:"URL",selector:"url_copy",isPc:!0}]}}}},{key:"active",get:function(){return this._active},set:function(t){this._active=t,this.dialog?this.dialog[t?"open":"close"]():this.targetWrap[t?"addClass":"removeClass"]("active")}},{key:"shareType",get:function(){return this._shareType},set:function(t){this.emit("share-change",{share:t}),this._shareType=t}},{key:"shareUrl",get:function(){return this._shareUrl},set:function(t){this._shareUrl=t}},{key:"imgUrl",get:function(){return this._imgUrl}},{key:"shareTitle",get:function(){return this._shareTitle}},{key:"dialog",get:function(){return this._dialog}},{key:"targetWrap",get:function(){return this._targetWrap}},{key:"shareHandle",value:function(t,e){var a,n,s,i,r=encodeURI("".concat(this.shareUrl));switch(t){case"KAT":if(this.kakaoInit()){var o=$('meta[property="og:image"]').attr("content"),l=$('meta[property="og:title"]').attr("content");Kakao.Link.sendDefault({objectType:"feed",installTalk:!0,content:{title:l,imageUrl:o,link:{webUrl:r,mobileWebUrl:r}},buttons:[{title:this.shareTitle||"모바일교보문고",link:{webUrl:r,mobileWebUrl:r}}]})}this.active=!1;break;case"KAS":if(this.kakaoInit()){if(this.ua.isMobileApp)return void Kakao.Story.open({url:r,text:this.shareTitle,install:!0,urlInfo:{title:this.shareTitle,desc:"",name:"",images:[this.imgUrl]}});Kakao.Story.share({url:r,text:this.shareTitle})}this.active=!1;break;case"NAB":this.open(p()(a="http://band.us/plugin/share?body=".concat(encodeURIComponent(p()(n="".concat(this.shareTitle,"\n")).call(n,r)),"&route=")).call(a,r));break;case"LIN":this.open("http://line.me/R/msg/text/?".concat(encodeURIComponent(p()(s="".concat(this.shareTitle,"\n")).call(s,r))));break;case"FAB":this.open("http://facebook.com/sharer/sharer.php?u=".concat(r));break;case"TWI":this.open(p()(i="http://twitter.com/intent/tweet?text=".concat(this.shareTitle,"&url=")).call(i,r));break;case"URL":if(this.shareUrl){var c=document.createElement("input");c.style="position: absolute; left: -1000px; top: -1000px",c.value=this.shareUrl,$(e?e.target:"body").append(c),c.select(),document.execCommand("copy"),c.remove(),this.ui.toast("URL이 복사되었습니다.")}break;case"MORE":this.showAppShare();break;case"MSG":this.messageLink()}}},{key:"messageLink",value:function(){var t=this.shareUrl;"win16|win32|win64|mac".indexOf(window.navigator.platform.toLowerCase())<0&&(window.navigator.userAgent.match(/iPhone|iPad|iPod/i)?window.location.href="sms:&body="+encodeURIComponent(t):navigator.userAgent.match(/Android/i)&&(window.location.href="sms:?body="+encodeURIComponent(t)))}},{key:"snsShareToggle",value:function(t,e){var a=this.elOpt.elements;this._targetWrap=$(t.target.closest(null==a?void 0:a.root)),this.active=e}},{key:"kakaoInit",value:function(){var t=(0,g._7)("vendors.kakao.apikey.dev");return null!==Kakao&&(Kakao.isInitialized()||Kakao.init(t),Kakao.isInitialized())}},{key:"open",value:function(t){if(this.ua.isMobileApp)return this.outLink(t),void(this.active=!1);window.open(t),this.active=!1}},{key:"showAppShare",value:function(){this.mobi.request("showAppShare",{title:this.shareTitle,contents:this.shareUrl})}},{key:"outLink",value:function(t){this.mobi.request("outLink",{url:t})}}]),a}(f.ht)},69639:function(t,e,a){a.r(e);var n=a(13535),s=a.n(n),i=a(68420),r=a(27344),o=a(90306),l=a(3020),c=a(3362),u=a(69798),h=a.n(u),p=a(98882),d=a.n(p),f=a(82324),_=a(13792),g=a(16800);function k(t){var e=function(){if("undefined"==typeof Reflect||!s())return!1;if(s().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s()(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,n=(0,c.Z)(t);if(e){var i=(0,c.Z)(this).constructor;a=s()(n,arguments,i)}else a=n.apply(this,arguments);return(0,l.Z)(this,a)}}var v=function(t){(0,o.Z)(a,t);var e=k(a);function a(){var t;return(0,i.Z)(this,a),(t=e.call(this,"sns-share"))._list=[],t}return(0,r.Z)(a,[{key:"list",get:function(){return this._list}},{key:"createDialog",value:function(t){var e=this;if(!this.initialized)return this.ready((function(){return e.createDialog(t)}));var a=(0,_.U2)(t,"trigger");if(null==a)return h().reject(new Error("[".concat(a,"] undefined trigger element selector!")));if(!(0,_.HD)(a)){var n="trigger_"+this.list.length;$(a).data("kbbfn-sid",n),a=n}var s=this.getInstance(a);if(null!=s)return h().resolve(s);var i=new g.R(this,a,t);return this.list.push(i),h().resolve(i)}},{key:"exists",value:function(t){return null!=this.getInstance(t)}},{key:"getInstance",value:function(t){var e;return d()(e=this.list).call(e,(function(e){return e.id===t}))}}]),a}(f.YZ);e.default=new v}},function(t){return t.O(0,[321,160,712],(function(){return e=69639,t(t.s=e);var e})),t.O()}])}));